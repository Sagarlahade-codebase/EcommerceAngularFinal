{"ast":null,"code":"import _asyncToGenerator from \"/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { clone } from '../util/object.js';\nimport { getOAuthUrls } from './util/oauth.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport OAuthError from '../errors/OAuthError.js';\nimport { verifyToken } from './verifyToken.js';\nimport { getDefaultTokenParams } from './util/defaultTokenParams.js';\nimport '../idx/types/api.js';\nimport '../myaccount/types.js';\nfunction validateResponse(res, oauthParams) {\n  if (res['error'] && res['error_description']) {\n    throw new OAuthError(res['error'], res['error_description']);\n  }\n  if (res.state !== oauthParams.state) {\n    throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n  }\n}\nfunction handleOAuthResponse(_x, _x2, _x3, _x4) {\n  return _handleOAuthResponse.apply(this, arguments);\n}\nfunction _handleOAuthResponse() {\n  _handleOAuthResponse = _asyncToGenerator(function* (sdk, tokenParams, res, urls) {\n    var pkce = sdk.options.pkce !== false;\n    if (pkce && (res.code || res.interaction_code)) {\n      return sdk.token.exchangeCodeForTokens(Object.assign({}, tokenParams, {\n        authorizationCode: res.code,\n        interactionCode: res.interaction_code\n      }), urls);\n    }\n    tokenParams = tokenParams || getDefaultTokenParams(sdk);\n    urls = urls || getOAuthUrls(sdk, tokenParams);\n    var responseType = tokenParams.responseType || [];\n    if (!Array.isArray(responseType)) {\n      responseType = [responseType];\n    }\n    var scopes;\n    if (res.scope) {\n      scopes = res.scope.split(' ');\n    } else {\n      scopes = clone(tokenParams.scopes);\n    }\n    var clientId = tokenParams.clientId || sdk.options.clientId;\n    validateResponse(res, tokenParams);\n    var tokenDict = {};\n    var expiresIn = res.expires_in;\n    var tokenType = res.token_type;\n    var accessToken = res.access_token;\n    var idToken = res.id_token;\n    var refreshToken = res.refresh_token;\n    var now = Math.floor(Date.now() / 1000);\n    if (accessToken) {\n      var accessJwt = sdk.token.decode(accessToken);\n      tokenDict.accessToken = {\n        accessToken: accessToken,\n        claims: accessJwt.payload,\n        expiresAt: Number(expiresIn) + now,\n        tokenType: tokenType,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        userinfoUrl: urls.userinfoUrl\n      };\n    }\n    if (refreshToken) {\n      tokenDict.refreshToken = {\n        refreshToken: refreshToken,\n        expiresAt: Number(expiresIn) + now,\n        scopes: scopes,\n        tokenUrl: urls.tokenUrl,\n        authorizeUrl: urls.authorizeUrl,\n        issuer: urls.issuer\n      };\n    }\n    if (idToken) {\n      var idJwt = sdk.token.decode(idToken);\n      var idTokenObj = {\n        idToken: idToken,\n        claims: idJwt.payload,\n        expiresAt: idJwt.payload.exp - idJwt.payload.iat + now,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        issuer: urls.issuer,\n        clientId: clientId\n      };\n      var validationParams = {\n        clientId: clientId,\n        issuer: urls.issuer,\n        nonce: tokenParams.nonce,\n        accessToken: accessToken\n      };\n      if (tokenParams.ignoreSignature !== undefined) {\n        validationParams.ignoreSignature = tokenParams.ignoreSignature;\n      }\n      yield verifyToken(sdk, idTokenObj, validationParams);\n      tokenDict.idToken = idTokenObj;\n    }\n    if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n      throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n    }\n    if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n      throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n    }\n    return {\n      tokens: tokenDict,\n      state: res.state,\n      code: res.code\n    };\n  });\n  return _handleOAuthResponse.apply(this, arguments);\n}\nexport { handleOAuthResponse };","map":{"version":3,"names":["clone","getOAuthUrls","AuthSdkError","OAuthError","verifyToken","getDefaultTokenParams","validateResponse","res","oauthParams","state","handleOAuthResponse","_x","_x2","_x3","_x4","_handleOAuthResponse","apply","arguments","_asyncToGenerator","sdk","tokenParams","urls","pkce","options","code","interaction_code","token","exchangeCodeForTokens","Object","assign","authorizationCode","interactionCode","responseType","Array","isArray","scopes","scope","split","clientId","tokenDict","expiresIn","expires_in","tokenType","token_type","accessToken","access_token","idToken","id_token","refreshToken","refresh_token","now","Math","floor","Date","accessJwt","decode","claims","payload","expiresAt","Number","authorizeUrl","userinfoUrl","tokenUrl","issuer","idJwt","idTokenObj","exp","iat","validationParams","nonce","ignoreSignature","undefined","indexOf","tokens"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/oidc/handleOAuthResponse.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { clone } from '../util/object.js';\nimport { getOAuthUrls } from './util/oauth.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport OAuthError from '../errors/OAuthError.js';\nimport { verifyToken } from './verifyToken.js';\nimport { getDefaultTokenParams } from './util/defaultTokenParams.js';\nimport '../idx/types/api.js';\nimport '../myaccount/types.js';\n\nfunction validateResponse(res, oauthParams) {\n    if (res['error'] && res['error_description']) {\n        throw new OAuthError(res['error'], res['error_description']);\n    }\n    if (res.state !== oauthParams.state) {\n        throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n    }\n}\nasync function handleOAuthResponse(sdk, tokenParams, res, urls) {\n    var pkce = sdk.options.pkce !== false;\n    if (pkce && (res.code || res.interaction_code)) {\n        return sdk.token.exchangeCodeForTokens(Object.assign({}, tokenParams, {\n            authorizationCode: res.code,\n            interactionCode: res.interaction_code\n        }), urls);\n    }\n    tokenParams = tokenParams || getDefaultTokenParams(sdk);\n    urls = urls || getOAuthUrls(sdk, tokenParams);\n    var responseType = tokenParams.responseType || [];\n    if (!Array.isArray(responseType)) {\n        responseType = [responseType];\n    }\n    var scopes;\n    if (res.scope) {\n        scopes = res.scope.split(' ');\n    }\n    else {\n        scopes = clone(tokenParams.scopes);\n    }\n    var clientId = tokenParams.clientId || sdk.options.clientId;\n    validateResponse(res, tokenParams);\n    var tokenDict = {};\n    var expiresIn = res.expires_in;\n    var tokenType = res.token_type;\n    var accessToken = res.access_token;\n    var idToken = res.id_token;\n    var refreshToken = res.refresh_token;\n    var now = Math.floor(Date.now() / 1000);\n    if (accessToken) {\n        var accessJwt = sdk.token.decode(accessToken);\n        tokenDict.accessToken = {\n            accessToken: accessToken,\n            claims: accessJwt.payload,\n            expiresAt: Number(expiresIn) + now,\n            tokenType: tokenType,\n            scopes: scopes,\n            authorizeUrl: urls.authorizeUrl,\n            userinfoUrl: urls.userinfoUrl\n        };\n    }\n    if (refreshToken) {\n        tokenDict.refreshToken = {\n            refreshToken: refreshToken,\n            expiresAt: Number(expiresIn) + now,\n            scopes: scopes,\n            tokenUrl: urls.tokenUrl,\n            authorizeUrl: urls.authorizeUrl,\n            issuer: urls.issuer,\n        };\n    }\n    if (idToken) {\n        var idJwt = sdk.token.decode(idToken);\n        var idTokenObj = {\n            idToken: idToken,\n            claims: idJwt.payload,\n            expiresAt: idJwt.payload.exp - idJwt.payload.iat + now,\n            scopes: scopes,\n            authorizeUrl: urls.authorizeUrl,\n            issuer: urls.issuer,\n            clientId: clientId\n        };\n        var validationParams = {\n            clientId: clientId,\n            issuer: urls.issuer,\n            nonce: tokenParams.nonce,\n            accessToken: accessToken\n        };\n        if (tokenParams.ignoreSignature !== undefined) {\n            validationParams.ignoreSignature = tokenParams.ignoreSignature;\n        }\n        await verifyToken(sdk, idTokenObj, validationParams);\n        tokenDict.idToken = idTokenObj;\n    }\n    if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n        throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n    }\n    if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n        throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n    }\n    return {\n        tokens: tokenDict,\n        state: res.state,\n        code: res.code\n    };\n}\n\nexport { handleOAuthResponse };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}