{"ast":null,"code":"import { loc } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/handle-url.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-base64.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-i18n.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-img.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-markdown.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-xsrfTokenInput.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport FormController from '../util/FormController.js';\nimport FormType from '../util/FormType.js';\nimport Util from '../../util/Util.js';\nimport Footer from '../views/enroll-factors/Footer.js';\nimport TextBox from '../views/shared/TextBox.js';\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction isRSA(provider) {\n  return provider === 'RSA';\n}\nfunction getClassName(provider) {\n  return isRSA(provider) ? 'enroll-rsa' : 'enroll-onprem';\n}\nvar EnrollOnPremController = FormController.extend({\n  className: function () {\n    return getClassName(this.options.provider);\n  },\n  Model: function () {\n    const provider = this.options.provider;\n    const factors = this.options.appState.get('factors');\n    const factor = factors.findWhere(oktaUnderscore.pick(this.options, 'provider', 'factorType'));\n    const profile = factor.get('profile');\n    const credentialId = profile && profile.credentialId ? profile.credentialId : '';\n    return {\n      props: {\n        credentialId: ['string', true, credentialId],\n        passCode: ['string', true],\n        factorId: 'string'\n      },\n      save: function () {\n        return this.doTransaction(function (transaction) {\n          const factor = oktaUnderscore.findWhere(transaction.factors, {\n            factorType: 'token',\n            provider: provider\n          });\n          return factor.enroll({\n            passCode: this.get('passCode'),\n            profile: {\n              credentialId: this.get('credentialId')\n            }\n          });\n        });\n      }\n    };\n  },\n  Form: function () {\n    const provider = this.options.provider;\n    const factors = this.options.appState.get('factors');\n    const factor = factors.findWhere(oktaUnderscore.pick(this.options, 'provider', 'factorType'));\n    const vendorName = factor.get('vendorName');\n    const title = isRSA(provider) ? loc('factor.totpHard.rsaSecurId', 'login') : vendorName;\n    return {\n      title: title,\n      noButtonBar: true,\n      autoSave: true,\n      className: getClassName(provider),\n      initialize: function () {\n        this.listenTo(this.model, 'error', (source, error) => {\n          if (error && error.status === 409) {\n            // 409 means we are in change pin, so we should clear out answer input\n            this.$('.o-form-input-name-passCode input').val('');\n            this.$('.o-form-input-name-passCode input').trigger('change');\n            this.$('.o-form-input-name-passCode input').focus();\n          }\n        });\n      },\n      formChildren: [FormType.Input({\n        label: loc('enroll.onprem.username.placeholder', 'login', [vendorName]),\n        'label-top': true,\n        explain: Util.createInputExplain('enroll.onprem.username.tooltip', 'enroll.onprem.username.placeholder', 'login', [vendorName], [vendorName]),\n        'explain-top': true,\n        name: 'credentialId',\n        input: TextBox,\n        type: 'text'\n      }), FormType.Input({\n        label: loc('enroll.onprem.passcode.placeholder', 'login', [vendorName]),\n        'label-top': true,\n        explain: Util.createInputExplain('enroll.onprem.passcode.tooltip', 'enroll.onprem.passcode.placeholder', 'login', [vendorName], [vendorName]),\n        'explain-top': true,\n        name: 'passCode',\n        input: TextBox,\n        type: 'password'\n      }), FormType.Toolbar({\n        noCancelButton: true,\n        save: loc('mfa.challenge.verify', 'login')\n      })]\n    };\n  },\n  Footer: Footer\n});\nexport { EnrollOnPremController as default };","map":{"version":3,"names":["loc","oktaUnderscore","FormController","FormType","Util","Footer","TextBox","isRSA","provider","getClassName","EnrollOnPremController","extend","className","options","Model","factors","appState","get","factor","findWhere","pick","profile","credentialId","props","passCode","factorId","save","doTransaction","transaction","factorType","enroll","Form","vendorName","title","noButtonBar","autoSave","initialize","listenTo","model","source","error","status","$","val","trigger","focus","formChildren","Input","label","explain","createInputExplain","name","input","type","Toolbar","noCancelButton","default"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v1/controllers/EnrollOnPremController.js"],"sourcesContent":["import { loc } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/handle-url.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-base64.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-i18n.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-img.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-markdown.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-xsrfTokenInput.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport FormController from '../util/FormController.js';\nimport FormType from '../util/FormType.js';\nimport Util from '../../util/Util.js';\nimport Footer from '../views/enroll-factors/Footer.js';\nimport TextBox from '../views/shared/TextBox.js';\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction isRSA(provider) {\n  return provider === 'RSA';\n}\n\nfunction getClassName(provider) {\n  return isRSA(provider) ? 'enroll-rsa' : 'enroll-onprem';\n}\n\nvar EnrollOnPremController = FormController.extend({\n  className: function () {\n    return getClassName(this.options.provider);\n  },\n  Model: function () {\n    const provider = this.options.provider;\n    const factors = this.options.appState.get('factors');\n    const factor = factors.findWhere(oktaUnderscore.pick(this.options, 'provider', 'factorType'));\n    const profile = factor.get('profile');\n    const credentialId = profile && profile.credentialId ? profile.credentialId : '';\n    return {\n      props: {\n        credentialId: ['string', true, credentialId],\n        passCode: ['string', true],\n        factorId: 'string'\n      },\n      save: function () {\n        return this.doTransaction(function (transaction) {\n          const factor = oktaUnderscore.findWhere(transaction.factors, {\n            factorType: 'token',\n            provider: provider\n          });\n\n          return factor.enroll({\n            passCode: this.get('passCode'),\n            profile: {\n              credentialId: this.get('credentialId')\n            }\n          });\n        });\n      }\n    };\n  },\n  Form: function () {\n    const provider = this.options.provider;\n    const factors = this.options.appState.get('factors');\n    const factor = factors.findWhere(oktaUnderscore.pick(this.options, 'provider', 'factorType'));\n    const vendorName = factor.get('vendorName');\n    const title = isRSA(provider) ? loc('factor.totpHard.rsaSecurId', 'login') : vendorName;\n    return {\n      title: title,\n      noButtonBar: true,\n      autoSave: true,\n      className: getClassName(provider),\n      initialize: function () {\n        this.listenTo(this.model, 'error', (source, error) => {\n          if (error && error.status === 409) {\n            // 409 means we are in change pin, so we should clear out answer input\n            this.$('.o-form-input-name-passCode input').val('');\n            this.$('.o-form-input-name-passCode input').trigger('change');\n            this.$('.o-form-input-name-passCode input').focus();\n          }\n        });\n      },\n      formChildren: [FormType.Input({\n        label: loc('enroll.onprem.username.placeholder', 'login', [vendorName]),\n        'label-top': true,\n        explain: Util.createInputExplain('enroll.onprem.username.tooltip', 'enroll.onprem.username.placeholder', 'login', [vendorName], [vendorName]),\n        'explain-top': true,\n        name: 'credentialId',\n        input: TextBox,\n        type: 'text'\n      }), FormType.Input({\n        label: loc('enroll.onprem.passcode.placeholder', 'login', [vendorName]),\n        'label-top': true,\n        explain: Util.createInputExplain('enroll.onprem.passcode.tooltip', 'enroll.onprem.passcode.placeholder', 'login', [vendorName], [vendorName]),\n        'explain-top': true,\n        name: 'passCode',\n        input: TextBox,\n        type: 'password'\n      }), FormType.Toolbar({\n        noCancelButton: true,\n        save: loc('mfa.challenge.verify', 'login')\n      })]\n    };\n  },\n  Footer: Footer\n});\n\nexport { EnrollOnPremController as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}