{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { post } from '../http/request.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { STATE_TOKEN_KEY_NAME } from '../constants.js';\nimport { addStateToken } from './util.js';\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args, {\n    withCredentials: true\n  });\n}\nfunction resumeTransaction(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n  return sdk.tx.status(args).then(function (res) {\n    return sdk.tx.createTransaction(res);\n  });\n}\nfunction introspectAuthn(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n  return transactionStep(sdk, args).then(function (res) {\n    return sdk.tx.createTransaction(res);\n  });\n}\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args);\n  return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args, {\n    withCredentials: true\n  });\n}\nfunction transactionExists(sdk) {\n  return !!sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n}\nfunction postToTransaction(sdk, url, args, options) {\n  options = Object.assign({\n    withCredentials: true\n  }, options);\n  return post(sdk, url, args, options).then(function (res) {\n    return sdk.tx.createTransaction(res);\n  });\n}\nexport { introspectAuthn, postToTransaction, resumeTransaction, transactionExists, transactionStatus, transactionStep };","map":{"version":3,"names":["post","AuthSdkError","STATE_TOKEN_KEY_NAME","addStateToken","transactionStatus","sdk","args","getIssuerOrigin","withCredentials","resumeTransaction","stateToken","tx","exists","_get","Promise","reject","status","then","res","createTransaction","introspectAuthn","transactionStep","transactionExists","postToTransaction","url","options","Object","assign"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/tx/api.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { post } from '../http/request.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { STATE_TOKEN_KEY_NAME } from '../constants.js';\nimport { addStateToken } from './util.js';\n\nfunction transactionStatus(sdk, args) {\n    args = addStateToken(sdk, args);\n    return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args, { withCredentials: true });\n}\nfunction resumeTransaction(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to resume'));\n        }\n    }\n    return sdk.tx.status(args)\n        .then(function (res) {\n        return sdk.tx.createTransaction(res);\n    });\n}\nfunction introspectAuthn(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n        }\n    }\n    return transactionStep(sdk, args)\n        .then(function (res) {\n        return sdk.tx.createTransaction(res);\n    });\n}\nfunction transactionStep(sdk, args) {\n    args = addStateToken(sdk, args);\n    return post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args, { withCredentials: true });\n}\nfunction transactionExists(sdk) {\n    return !!sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n}\nfunction postToTransaction(sdk, url, args, options) {\n    options = Object.assign({ withCredentials: true }, options);\n    return post(sdk, url, args, options)\n        .then(function (res) {\n        return sdk.tx.createTransaction(res);\n    });\n}\n\nexport { introspectAuthn, postToTransaction, resumeTransaction, transactionExists, transactionStatus, transactionStep };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}