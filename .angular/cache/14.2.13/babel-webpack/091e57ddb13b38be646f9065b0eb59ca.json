{"ast":null,"code":"import _asyncToGenerator from \"/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ConfigError } from '../../util/Errors.js';\nimport { FORMS } from '../ion/RemediationConstants.js';\nimport { CONFIGURED_FLOW } from './constants.js';\n\n/*!\n * Copyright (c) 2021, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n// if not available, returns original idxResponse (and logs warning)\nfunction proceedIfAvailable(_x, _x2, _x3) {\n  return _proceedIfAvailable.apply(this, arguments);\n} // attempts to \"step into\" a specific flow by calling `.proceed` with a specific remeidation (or calls an action)\n// the \"desired\" remeidation is not guaranteed to be available, depends upon Org configurations\nfunction _proceedIfAvailable() {\n  _proceedIfAvailable = _asyncToGenerator(function* (idxState, remediation, flow) {\n    const rem = idxState.neededToProceed.find(item => item.name === remediation);\n    if (!rem) {\n      return idxState;\n    }\n    try {\n      const nextIdxState = yield idxState.proceed(remediation);\n      return nextIdxState;\n    } catch (err) {\n      // catches and handles `Unknown remediation` errors thrown okta-idx-js\n      if (typeof err === 'string' && err.startsWith('Unknown remediation choice')) {\n        return idxState;\n      } else {\n        // do not catch non-`Unknown remediation` errors here\n        throw err;\n      }\n    }\n  });\n  return _proceedIfAvailable.apply(this, arguments);\n}\nfunction stepIntoSpecificIdxFlow(_x4) {\n  return _stepIntoSpecificIdxFlow.apply(this, arguments);\n} // ensures the `flow` stored in the transaction meta matches the flow configuration\n// if they do not match, abandon the current (meta) flow and start a new (configured) flow\nfunction _stepIntoSpecificIdxFlow() {\n  _stepIntoSpecificIdxFlow = _asyncToGenerator(function* (idxState, flow = 'default') {\n    switch (flow) {\n      case CONFIGURED_FLOW.DEFAULT:\n      case CONFIGURED_FLOW.PROCEED:\n      case CONFIGURED_FLOW.LOGIN:\n        // default IDX response from interact is \"Login\" page/flow. Do nothing\n        return idxState;\n      // step logic is handled by auth-js\n\n      case CONFIGURED_FLOW.REGISTRATION:\n      case CONFIGURED_FLOW.RESET_PASSWORD:\n        return idxState;\n      case CONFIGURED_FLOW.UNLOCK_ACCOUNT:\n        // requires: introspect -> identify-recovery -> select-authenticator-unlock-account\n        return yield proceedIfAvailable(idxState, FORMS.UNLOCK_ACCOUNT);\n      default:\n        throw new ConfigError('Invalid \"flow\" configuration');\n    }\n  });\n  return _stepIntoSpecificIdxFlow.apply(this, arguments);\n}\nfunction handleConfiguredFlow(_x5, _x6) {\n  return _handleConfiguredFlow.apply(this, arguments);\n}\nfunction _handleConfiguredFlow() {\n  _handleConfiguredFlow = _asyncToGenerator(function* (originalResp, settings) {\n    const authClient = settings.getAuthClient();\n    const configuredFlow = authClient.idx.getFlow(); // attempts to step into the desired flow\n\n    const idxState = yield stepIntoSpecificIdxFlow(originalResp, configuredFlow);\n    return idxState;\n  });\n  return _handleConfiguredFlow.apply(this, arguments);\n}\nexport { handleConfiguredFlow };","map":{"version":3,"names":["ConfigError","FORMS","CONFIGURED_FLOW","proceedIfAvailable","_x","_x2","_x3","_proceedIfAvailable","apply","arguments","_asyncToGenerator","idxState","remediation","flow","rem","neededToProceed","find","item","name","nextIdxState","proceed","err","startsWith","stepIntoSpecificIdxFlow","_x4","_stepIntoSpecificIdxFlow","DEFAULT","PROCEED","LOGIN","REGISTRATION","RESET_PASSWORD","UNLOCK_ACCOUNT","handleConfiguredFlow","_x5","_x6","_handleConfiguredFlow","originalResp","settings","authClient","getAuthClient","configuredFlow","idx","getFlow"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v2/client/handleConfiguredFlow.js"],"sourcesContent":["import { ConfigError } from '../../util/Errors.js';\nimport { FORMS } from '../ion/RemediationConstants.js';\nimport { CONFIGURED_FLOW } from './constants.js';\n\n/*!\n * Copyright (c) 2021, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n// if not available, returns original idxResponse (and logs warning)\n\nasync function proceedIfAvailable(idxState, remediation, flow) {\n  const rem = idxState.neededToProceed.find(item => item.name === remediation);\n\n  if (!rem) {\n    return idxState;\n  }\n\n  try {\n    const nextIdxState = await idxState.proceed(remediation);\n    return nextIdxState;\n  } catch (err) {\n    // catches and handles `Unknown remediation` errors thrown okta-idx-js\n    if (typeof err === 'string' && err.startsWith('Unknown remediation choice')) {\n      return idxState;\n    } else {\n      // do not catch non-`Unknown remediation` errors here\n      throw err;\n    }\n  }\n} // attempts to \"step into\" a specific flow by calling `.proceed` with a specific remeidation (or calls an action)\n// the \"desired\" remeidation is not guaranteed to be available, depends upon Org configurations\n\n\nasync function stepIntoSpecificIdxFlow(idxState, flow = 'default') {\n  switch (flow) {\n    case CONFIGURED_FLOW.DEFAULT:\n    case CONFIGURED_FLOW.PROCEED:\n    case CONFIGURED_FLOW.LOGIN:\n      // default IDX response from interact is \"Login\" page/flow. Do nothing\n      return idxState;\n    // step logic is handled by auth-js\n\n    case CONFIGURED_FLOW.REGISTRATION:\n    case CONFIGURED_FLOW.RESET_PASSWORD:\n      return idxState;\n\n    case CONFIGURED_FLOW.UNLOCK_ACCOUNT:\n      // requires: introspect -> identify-recovery -> select-authenticator-unlock-account\n      return await proceedIfAvailable(idxState, FORMS.UNLOCK_ACCOUNT);\n\n    default:\n      throw new ConfigError('Invalid \"flow\" configuration');\n  }\n} // ensures the `flow` stored in the transaction meta matches the flow configuration\n// if they do not match, abandon the current (meta) flow and start a new (configured) flow\n\n\nasync function handleConfiguredFlow(originalResp, settings) {\n  const authClient = settings.getAuthClient();\n  const configuredFlow = authClient.idx.getFlow(); // attempts to step into the desired flow\n\n  const idxState = await stepIntoSpecificIdxFlow(originalResp, configuredFlow);\n  return idxState;\n}\n\nexport { handleConfiguredFlow };\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,sBAAsB;AAClD,SAASC,KAAK,QAAQ,gCAAgC;AACtD,SAASC,eAAe,QAAQ,gBAAgB;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,SAEeC,kBAAkBA,CAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA,EAmB/B;AACF;AAAA,SAAAF,oBAAA;EAAAA,mBAAA,GAAAG,iBAAA,CApBA,WAAkCC,QAAQ,EAAEC,WAAW,EAAEC,IAAI,EAAE;IAC7D,MAAMC,GAAG,GAAGH,QAAQ,CAACI,eAAe,CAACC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,KAAKN,WAAW,CAAC;IAE5E,IAAI,CAACE,GAAG,EAAE;MACR,OAAOH,QAAQ;IACjB;IAEA,IAAI;MACF,MAAMQ,YAAY,SAASR,QAAQ,CAACS,OAAO,CAACR,WAAW,CAAC;MACxD,OAAOO,YAAY;IACrB,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZ;MACA,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAIA,GAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,EAAE;QAC3E,OAAOX,QAAQ;MACjB,CAAC,MAAM;QACL;QACA,MAAMU,GAAG;MACX;IACF;EACF,CAAC;EAAA,OAAAd,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAIcc,uBAAuBA,CAAAC,GAAA;EAAA,OAAAC,wBAAA,CAAAjB,KAAA,OAAAC,SAAA;AAAA,EAoBpC;AACF;AAAA,SAAAgB,yBAAA;EAAAA,wBAAA,GAAAf,iBAAA,CArBA,WAAuCC,QAAQ,EAAEE,IAAI,GAAG,SAAS,EAAE;IACjE,QAAQA,IAAI;MACV,KAAKX,eAAe,CAACwB,OAAO;MAC5B,KAAKxB,eAAe,CAACyB,OAAO;MAC5B,KAAKzB,eAAe,CAAC0B,KAAK;QACxB;QACA,OAAOjB,QAAQ;MACjB;;MAEA,KAAKT,eAAe,CAAC2B,YAAY;MACjC,KAAK3B,eAAe,CAAC4B,cAAc;QACjC,OAAOnB,QAAQ;MAEjB,KAAKT,eAAe,CAAC6B,cAAc;QACjC;QACA,aAAa5B,kBAAkB,CAACQ,QAAQ,EAAEV,KAAK,CAAC8B,cAAc,CAAC;MAEjE;QACE,MAAM,IAAI/B,WAAW,CAAC,8BAA8B,CAAC;IACzD;EACF,CAAC;EAAA,OAAAyB,wBAAA,CAAAjB,KAAA,OAAAC,SAAA;AAAA;AAAA,SAIcuB,oBAAoBA,CAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,qBAAA,CAAA3B,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAA0B,sBAAA;EAAAA,qBAAA,GAAAzB,iBAAA,CAAnC,WAAoC0B,YAAY,EAAEC,QAAQ,EAAE;IAC1D,MAAMC,UAAU,GAAGD,QAAQ,CAACE,aAAa,CAAC,CAAC;IAC3C,MAAMC,cAAc,GAAGF,UAAU,CAACG,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;;IAEjD,MAAM/B,QAAQ,SAASY,uBAAuB,CAACa,YAAY,EAAEI,cAAc,CAAC;IAC5E,OAAO7B,QAAQ;EACjB,CAAC;EAAA,OAAAwB,qBAAA,CAAA3B,KAAA,OAAAC,SAAA;AAAA;AAED,SAASuB,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module"}