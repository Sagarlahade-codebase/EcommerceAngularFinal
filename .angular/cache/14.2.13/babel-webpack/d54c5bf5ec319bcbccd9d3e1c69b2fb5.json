{"ast":null,"code":"import _asyncToGenerator from \"/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { isFunction } from '../util/types.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport OAuthError from '../errors/OAuthError.js';\nimport { httpRequest } from '../http/request.js';\nimport '../idx/types/api.js';\nimport { isAccessToken, isIDToken } from '../types/Token.js';\nimport '../myaccount/types.js';\nfunction getUserInfo(_x, _x2, _x3) {\n  return _getUserInfo.apply(this, arguments);\n}\nfunction _getUserInfo() {\n  _getUserInfo = _asyncToGenerator(function* (sdk, accessTokenObject, idTokenObject) {\n    if (!accessTokenObject) {\n      accessTokenObject = (yield sdk.tokenManager.getTokens()).accessToken;\n    }\n    if (!idTokenObject) {\n      idTokenObject = (yield sdk.tokenManager.getTokens()).idToken;\n    }\n    if (!accessTokenObject || !isAccessToken(accessTokenObject)) {\n      return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n    }\n    if (!idTokenObject || !isIDToken(idTokenObject)) {\n      return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n    }\n    return httpRequest(sdk, {\n      url: accessTokenObject.userinfoUrl,\n      method: 'GET',\n      accessToken: accessTokenObject.accessToken\n    }).then(userInfo => {\n      if (userInfo.sub === idTokenObject.claims.sub) {\n        return userInfo;\n      }\n      return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n    }).catch(function (err) {\n      if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n        var authenticateHeader;\n        if (err.xhr.headers && isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n          authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n        } else if (isFunction(err.xhr.getResponseHeader)) {\n          authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n        }\n        if (authenticateHeader) {\n          var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n          var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n          var error = errorMatches[1];\n          var errorDescription = errorDescriptionMatches[1];\n          if (error && errorDescription) {\n            err = new OAuthError(error, errorDescription);\n          }\n        }\n      }\n      throw err;\n    });\n  });\n  return _getUserInfo.apply(this, arguments);\n}\nexport { getUserInfo };","map":{"version":3,"names":["isFunction","AuthSdkError","OAuthError","httpRequest","isAccessToken","isIDToken","getUserInfo","_x","_x2","_x3","_getUserInfo","apply","arguments","_asyncToGenerator","sdk","accessTokenObject","idTokenObject","tokenManager","getTokens","accessToken","idToken","Promise","reject","url","userinfoUrl","method","then","userInfo","sub","claims","catch","err","xhr","status","authenticateHeader","headers","get","getResponseHeader","errorMatches","match","errorDescriptionMatches","error","errorDescription"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/oidc/getUserInfo.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { isFunction } from '../util/types.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport OAuthError from '../errors/OAuthError.js';\nimport { httpRequest } from '../http/request.js';\nimport '../idx/types/api.js';\nimport { isAccessToken, isIDToken } from '../types/Token.js';\nimport '../myaccount/types.js';\n\nasync function getUserInfo(sdk, accessTokenObject, idTokenObject) {\n    if (!accessTokenObject) {\n        accessTokenObject = (await sdk.tokenManager.getTokens()).accessToken;\n    }\n    if (!idTokenObject) {\n        idTokenObject = (await sdk.tokenManager.getTokens()).idToken;\n    }\n    if (!accessTokenObject || !isAccessToken(accessTokenObject)) {\n        return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n    }\n    if (!idTokenObject || !isIDToken(idTokenObject)) {\n        return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n    }\n    return httpRequest(sdk, {\n        url: accessTokenObject.userinfoUrl,\n        method: 'GET',\n        accessToken: accessTokenObject.accessToken\n    })\n        .then(userInfo => {\n        if (userInfo.sub === idTokenObject.claims.sub) {\n            return userInfo;\n        }\n        return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n    })\n        .catch(function (err) {\n        if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n            var authenticateHeader;\n            if (err.xhr.headers && isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n                authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n            }\n            else if (isFunction(err.xhr.getResponseHeader)) {\n                authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n            }\n            if (authenticateHeader) {\n                var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n                var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n                var error = errorMatches[1];\n                var errorDescription = errorDescriptionMatches[1];\n                if (error && errorDescription) {\n                    err = new OAuthError(error, errorDescription);\n                }\n            }\n        }\n        throw err;\n    });\n}\n\nexport { getUserInfo };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}