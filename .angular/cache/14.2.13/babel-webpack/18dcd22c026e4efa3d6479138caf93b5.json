{"ast":null,"code":"import _asyncToGenerator from \"/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { httpRequest } from '../../../http/request.js';\nimport { divideActionParamsByMutability } from './actionParser.js';\nimport AuthApiError from '../../../errors/AuthApiError.js';\nconst generateDirectFetch = function generateDirectFetch(authClient, {\n  actionDefinition,\n  defaultParamsForAction = {},\n  immutableParamsForAction = {},\n  toPersist = {}\n}) {\n  const target = actionDefinition.href;\n  return /*#__PURE__*/_asyncToGenerator(function* (params = {}) {\n    var _a;\n    const headers = {\n      'Content-Type': 'application/json',\n      'Accept': actionDefinition.accepts || 'application/ion+json'\n    };\n    const body = JSON.stringify(Object.assign(Object.assign(Object.assign({}, defaultParamsForAction), params), immutableParamsForAction));\n    try {\n      const response = yield httpRequest(authClient, {\n        url: target,\n        method: actionDefinition.method,\n        headers,\n        args: body,\n        withCredentials: (_a = toPersist === null || toPersist === void 0 ? void 0 : toPersist.withCredentials) !== null && _a !== void 0 ? _a : true\n      });\n      return authClient.idx.makeIdxResponse(Object.assign({}, response), toPersist, true);\n    } catch (err) {\n      if (!(err instanceof AuthApiError) || !(err === null || err === void 0 ? void 0 : err.xhr)) {\n        throw err;\n      }\n      const response = err.xhr;\n      const payload = response.responseJSON || JSON.parse(response.responseText);\n      const wwwAuthHeader = response.headers['WWW-Authenticate'] || response.headers['www-authenticate'];\n      const idxResponse = authClient.idx.makeIdxResponse(Object.assign({}, payload), toPersist, false);\n      if (response.status === 401 && wwwAuthHeader === 'Oktadevicejwt realm=\"Okta Device\"') {\n        idxResponse.stepUp = true;\n      }\n      throw idxResponse;\n    }\n  });\n};\nconst generateIdxAction = function generateIdxAction(authClient, actionDefinition, toPersist) {\n  const generator = generateDirectFetch;\n  const {\n    defaultParams,\n    neededParams,\n    immutableParams\n  } = divideActionParamsByMutability(actionDefinition);\n  const action = generator(authClient, {\n    actionDefinition,\n    defaultParamsForAction: defaultParams[actionDefinition.name],\n    immutableParamsForAction: immutableParams[actionDefinition.name],\n    toPersist\n  });\n  action.neededParams = neededParams;\n  return action;\n};\nexport { generateIdxAction as default };","map":{"version":3,"names":["httpRequest","divideActionParamsByMutability","AuthApiError","generateDirectFetch","authClient","actionDefinition","defaultParamsForAction","immutableParamsForAction","toPersist","target","href","_asyncToGenerator","params","_a","headers","accepts","body","JSON","stringify","Object","assign","response","url","method","args","withCredentials","idx","makeIdxResponse","err","xhr","payload","responseJSON","parse","responseText","wwwAuthHeader","idxResponse","status","stepUp","generateIdxAction","generator","defaultParams","neededParams","immutableParams","action","name","default"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/idx/idxState/v1/generateIdxAction.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { httpRequest } from '../../../http/request.js';\nimport { divideActionParamsByMutability } from './actionParser.js';\nimport AuthApiError from '../../../errors/AuthApiError.js';\n\nconst generateDirectFetch = function generateDirectFetch(authClient, { actionDefinition, defaultParamsForAction = {}, immutableParamsForAction = {}, toPersist = {} }) {\n    const target = actionDefinition.href;\n    return async function (params = {}) {\n        var _a;\n        const headers = {\n            'Content-Type': 'application/json',\n            'Accept': actionDefinition.accepts || 'application/ion+json',\n        };\n        const body = JSON.stringify(Object.assign(Object.assign(Object.assign({}, defaultParamsForAction), params), immutableParamsForAction));\n        try {\n            const response = await httpRequest(authClient, {\n                url: target,\n                method: actionDefinition.method,\n                headers,\n                args: body,\n                withCredentials: (_a = toPersist === null || toPersist === void 0 ? void 0 : toPersist.withCredentials) !== null && _a !== void 0 ? _a : true\n            });\n            return authClient.idx.makeIdxResponse(Object.assign({}, response), toPersist, true);\n        }\n        catch (err) {\n            if (!(err instanceof AuthApiError) || !(err === null || err === void 0 ? void 0 : err.xhr)) {\n                throw err;\n            }\n            const response = err.xhr;\n            const payload = response.responseJSON || JSON.parse(response.responseText);\n            const wwwAuthHeader = response.headers['WWW-Authenticate'] || response.headers['www-authenticate'];\n            const idxResponse = authClient.idx.makeIdxResponse(Object.assign({}, payload), toPersist, false);\n            if (response.status === 401 && wwwAuthHeader === 'Oktadevicejwt realm=\"Okta Device\"') {\n                idxResponse.stepUp = true;\n            }\n            throw idxResponse;\n        }\n    };\n};\nconst generateIdxAction = function generateIdxAction(authClient, actionDefinition, toPersist) {\n    const generator = generateDirectFetch;\n    const { defaultParams, neededParams, immutableParams } = divideActionParamsByMutability(actionDefinition);\n    const action = generator(authClient, {\n        actionDefinition,\n        defaultParamsForAction: defaultParams[actionDefinition.name],\n        immutableParamsForAction: immutableParams[actionDefinition.name],\n        toPersist\n    });\n    action.neededParams = neededParams;\n    return action;\n};\n\nexport { generateIdxAction as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}