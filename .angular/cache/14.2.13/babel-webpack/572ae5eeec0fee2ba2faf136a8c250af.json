{"ast":null,"code":"import _Handlebars2 from '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport { View, loc, Form } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/handle-url.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-base64.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-i18n.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-img.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-markdown.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-xsrfTokenInput.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport Backbone from '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport Model from '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport LoginModel from '../models/LoginModel.js';\nimport RegistrationSchema from '../models/RegistrationSchema.js';\nimport Q from 'q';\nimport BaseLoginController from '../util/BaseLoginController.js';\nimport Enums from '../../util/Enums.js';\nimport { RegistrationError } from '../../util/Errors.js';\nimport RegistrationFormFactory from '../util/RegistrationFormFactory.js';\nimport Util from '../../util/Util.js';\nimport SubSchema from '../views/registration/SubSchema.js';\nconst RegistrationControllerFooter = View.extend({\n  template: _Handlebars2.template({\n    \"compiler\": [8, \">= 4.3.0\"],\n    \"main\": function (container, depth0, helpers, partials, data) {\n      var lookupProperty = container.lookupProperty || function (parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined;\n      };\n      return \"<a href=\\\"#\\\" class=\\\"link help\\\" data-se=\\\"back-link\\\">\" + container.escapeExpression((lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"i18n\",\n        \"hash\": {\n          \"bundle\": \"login\",\n          \"code\": \"goback\"\n        },\n        \"data\": data,\n        \"loc\": {\n          \"start\": {\n            \"line\": 1,\n            \"column\": 50\n          },\n          \"end\": {\n            \"line\": 1,\n            \"column\": 87\n          }\n        }\n      })) + \"</a>\";\n    },\n    \"useData\": true\n  }),\n  className: 'auth-footer',\n  events: {\n    'click .help': function (e) {\n      e.preventDefault();\n      this.back();\n    }\n  },\n  back: function () {\n    this.state.set('navigateDir', Enums.DIRECTION_BACK);\n    this.options.appState.trigger('navigate', '');\n  }\n});\nvar RegistrationController = BaseLoginController.extend({\n  className: 'registration',\n  initialize: function () {\n    const RegistrationControllerSchema = RegistrationSchema.extend({\n      settings: this.options.settings,\n      url: this.options.settings.get('baseUrl') + '/api/v1/registration/form'\n    }); // setup schema\n\n    const schema = new RegistrationControllerSchema();\n    this.state.set('schema', schema);\n  },\n  getRegistrationApiUrl: function () {\n    const defaultPolicyId = this.settings.get('defaultPolicyId'); // default policyId\n\n    const orgPolicyId = this.options.settings.get('policyId'); // org policyId\n\n    const apiUrl = defaultPolicyId ? this.getRegistrationPolicyApi(defaultPolicyId) : this.getRegistrationPolicyApi(orgPolicyId);\n    return apiUrl;\n  },\n  getRegistrationPolicyApi: function (policyId) {\n    return this.options.settings.get('baseUrl') + '/api/v1/registration/' + policyId;\n  },\n  doPostSubmit: function () {\n    if (this.model.get('activationToken')) {\n      const self = this; // register via activation token\n\n      self.settings.callGlobalSuccess(Enums.REGISTRATION_COMPLETE, {\n        activationToken: this.model.get('activationToken')\n      });\n      const loginModel = new LoginModel({\n        settings: self.model.appState.settings\n      });\n      loginModel.loginWithActivationToken(this.model.get('activationToken')).then(function (transaction) {\n        self.model.trigger('setTransaction', transaction);\n      });\n    } else {\n      // register via activation email\n      this.model.appState.set('username', this.model.get('email'));\n      this.model.appState.trigger('navigate', 'signin/register-complete');\n    }\n  },\n  registerUser: function (postData) {\n    const self = this;\n    Object.keys(postData).forEach(k => (oktaUnderscore.isNull(postData[k]) || oktaUnderscore.isUndefined(postData[k]) || postData[k] === '') && delete postData[k]);\n    this.model.attributes = postData; // Model.save returns a jqXHR\n\n    Backbone.Model.prototype.save.call(this.model).then(function () {\n      self.model.trigger('startSaving');\n      const activationToken = self.model.get('activationToken');\n      const postSubmitData = activationToken ? activationToken : self.model.get('email');\n      self.settings.postRegistrationSubmit(postSubmitData, function () {\n        self.doPostSubmit();\n      }, function (errors) {\n        self.showErrors(errors);\n      });\n    }).fail(err => {\n      const responseJSON = err.responseJSON;\n      if (responseJSON && responseJSON.errorCauses.length) {\n        const {\n          errorCode: errorCode,\n          errorCauses: errorCauses\n        } = responseJSON;\n        const {\n          errorSummary: errorSummary,\n          reason: reason,\n          location: location\n        } = errorCauses[0];\n        const isNotUniqueValue = errorCode === 'E0000001' && reason === 'UNIQUE_CONSTRAINT';\n        if (isNotUniqueValue) {\n          this.renderIsNotUniqueError(responseJSON);\n        }\n        this.renderLegacyLocationErrorIfNeeded(location, errorSummary);\n        Util.triggerAfterError(this, new RegistrationError(errorSummary));\n      }\n    });\n  },\n  renderIsNotUniqueError: function (error) {\n    const {\n      location: location\n    } = error.errorCauses[0];\n    const errorSummary = loc('registration.error.userName.notUniqueWithinOrg', 'login', [location]); // replace generic error message with more specific one\n    // without using backbone events because there was a race condition\n    // between clearing and triggering errors\n\n    this.$el.find('.okta-form-infobox-error p').text(errorSummary);\n  },\n  renderLegacyLocationErrorIfNeeded: function (location, errorSummary) {\n    // replace generic error message with errorSummary for v1 SIW\n    // this makes sure that with legacy location that starts with `data.userProfile`\n    // we still see the errorSummary in the error banner instead of only a generic error\n    // See example in https://developer.okta.com/docs/reference/registration-hook/#sample-json-payload-of-request\n    if (location && /^data\\.userProfile.*/.test(location)) {\n      this.$el.find('.okta-form-infobox-error p').text(errorSummary);\n    }\n  },\n  createRegistrationModel: function (modelProperties) {\n    const self = this;\n    const RegistrationControllerModel = Model.extend({\n      url: self.getRegistrationApiUrl() + '/register',\n      settings: this.settings,\n      appState: this.options.appState,\n      props: modelProperties,\n      local: {\n        activationToken: 'string'\n      },\n      toJSON: function () {\n        const data = Model.prototype.toJSON.apply(this, arguments);\n        return {\n          userProfile: data,\n          relayState: this.settings.get('relayState')\n        };\n      },\n      parse: function (resp) {\n        this.set('activationToken', resp.activationToken);\n        delete resp.activationToken;\n        return resp;\n      },\n      save: function () {\n        this.settings.preRegistrationSubmit(this.attributes, function (postData) {\n          self.registerUser(postData);\n        }, function (errors) {\n          self.showErrors(errors);\n        });\n      }\n    });\n    return new RegistrationControllerModel();\n  },\n  showErrors: function (error, hideRegisterButton) {\n    //for parseSchema error hide form and show error at form level\n    if (error.callback === 'parseRegistrationSchema' && error.errorCauses) {\n      error.errorSummary = oktaUnderscore.clone(error.errorCauses[0].errorSummary);\n      delete error.errorCauses;\n    } //show error on form\n\n    this.model.trigger('error', this.model, {\n      responseJSON: error\n    }); //throw registration error\n\n    const errMsg = error.callback ? error.callback + ':' + error.errorSummary : error.errorSummary;\n    Util.triggerAfterError(this, new RegistrationError(errMsg));\n    if (hideRegisterButton) {\n      this.$el.find('.button-primary').hide();\n    }\n  },\n  fetchInitialData: function () {\n    const self = this; // register parse complete event listener\n\n    self.state.get('schema').on('parseComplete', function (updatedSchema) {\n      const modelProperties = updatedSchema.properties.createModelProperties();\n      self.settings.set('defaultPolicyId', updatedSchema.properties.defaultPolicyId); // create model\n\n      self.model = self.createRegistrationModel(modelProperties); // create form\n\n      const RegistrationControllerForm = Form.extend({\n        layout: 'o-form-theme',\n        autoSave: true,\n        noCancelButton: true,\n        title: loc('registration.form.title', 'login'),\n        save: loc('registration.form.submit', 'login'),\n        modelEvents: {\n          'invalid': 'modifyErrors'\n        },\n        hasSavingState: true,\n        customSavingState: {\n          start: 'startSaving',\n          stop: 'stopSaving'\n        },\n        modifyErrors: function (model, errorResp) {\n          // overwrite courage errorResp object to show custom error message\n          for (let formFieldName in errorResp) {\n            if (errorResp[formFieldName] === 'model.validation.field.string.minLength') {\n              errorResp[formFieldName] = loc('registration.model.validation.field.string.too.short', 'login', [model.props[formFieldName].minLength]);\n            } else if (errorResp[formFieldName] === 'model.validation.field.string.maxLength') {\n              errorResp[formFieldName] = loc('registration.model.validation.field.string.too.long', 'login', [model.props[formFieldName].maxLength + 1]);\n            }\n          }\n        }\n      });\n      const form = new RegistrationControllerForm(self.toJSON()); // add form\n\n      self.add(form); // add footer\n\n      self.footer = new self.Footer(self.toJSON());\n      self.add(self.footer);\n      self.addListeners();\n      if (updatedSchema.error) {\n        self.showErrors(updatedSchema.error, true);\n      } else {\n        // add fields\n        updatedSchema.properties.each(function (schemaProperty) {\n          const inputOptions = RegistrationFormFactory.createInputOptions(schemaProperty);\n          const subSchemas = schemaProperty.get('subSchemas');\n          const name = schemaProperty.get('name');\n          form.addInput(inputOptions);\n          if (name === 'password' && subSchemas) {\n            form.add(SubSchema.extend({\n              id: 'subschemas-' + name,\n              subSchemas: subSchemas\n            }));\n          }\n        });\n        const requiredFieldsLabel = _Handlebars2.template({\n          \"compiler\": [8, \">= 4.3.0\"],\n          \"main\": function (container, depth0, helpers, partials, data) {\n            var helper,\n              lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                  return parent[propertyName];\n                }\n                return undefined;\n              };\n            return \"<span class=\\\"required-fields-label\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"label\") || (depth0 != null ? lookupProperty(depth0, \"label\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n              \"name\": \"label\",\n              \"hash\": {},\n              \"data\": data,\n              \"loc\": {\n                \"start\": {\n                  \"line\": 1,\n                  \"column\": 36\n                },\n                \"end\": {\n                  \"line\": 1,\n                  \"column\": 45\n                }\n              }\n            }) : helper)) + \"</span>\";\n          },\n          \"useData\": true\n        })({\n          label: loc('registration.required.fields.label', 'login')\n        });\n        form.add(requiredFieldsLabel);\n      }\n    }); // fetch schema from API, returns a jqXHR. Wrap it in a Q\n\n    return Q(this.state.get('schema').fetch());\n  },\n  Footer: RegistrationControllerFooter\n});\nexport { RegistrationController as default };","map":{"version":3,"names":["_Handlebars2","View","loc","Form","Backbone","oktaUnderscore","Model","LoginModel","RegistrationSchema","Q","BaseLoginController","Enums","RegistrationError","RegistrationFormFactory","Util","SubSchema","RegistrationControllerFooter","extend","template","main","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","escapeExpression","hooks","helperMissing","nullContext","className","events","click .help","e","preventDefault","back","state","set","DIRECTION_BACK","options","appState","trigger","RegistrationController","initialize","RegistrationControllerSchema","settings","url","get","schema","getRegistrationApiUrl","defaultPolicyId","orgPolicyId","apiUrl","getRegistrationPolicyApi","policyId","doPostSubmit","model","self","callGlobalSuccess","REGISTRATION_COMPLETE","activationToken","loginModel","loginWithActivationToken","then","transaction","registerUser","postData","keys","forEach","k","isNull","isUndefined","attributes","save","postSubmitData","postRegistrationSubmit","errors","showErrors","fail","err","responseJSON","errorCauses","length","errorCode","errorSummary","reason","location","isNotUniqueValue","renderIsNotUniqueError","renderLegacyLocationErrorIfNeeded","triggerAfterError","error","$el","find","text","test","createRegistrationModel","modelProperties","RegistrationControllerModel","props","local","toJSON","apply","arguments","userProfile","relayState","parse","resp","preRegistrationSubmit","hideRegisterButton","callback","clone","errMsg","hide","fetchInitialData","on","updatedSchema","properties","createModelProperties","RegistrationControllerForm","layout","autoSave","noCancelButton","title","modelEvents","hasSavingState","customSavingState","start","stop","modifyErrors","errorResp","formFieldName","minLength","maxLength","form","add","footer","Footer","addListeners","each","schemaProperty","inputOptions","createInputOptions","subSchemas","name","addInput","id","requiredFieldsLabel","helper","label","fetch","default"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v1/controllers/RegistrationController.js"],"sourcesContent":["import _Handlebars2 from '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport { View, loc, Form } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/handle-url.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-base64.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-i18n.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-img.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-markdown.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-xsrfTokenInput.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport Backbone from '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport Model from '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport LoginModel from '../models/LoginModel.js';\nimport RegistrationSchema from '../models/RegistrationSchema.js';\nimport Q from 'q';\nimport BaseLoginController from '../util/BaseLoginController.js';\nimport Enums from '../../util/Enums.js';\nimport { RegistrationError } from '../../util/Errors.js';\nimport RegistrationFormFactory from '../util/RegistrationFormFactory.js';\nimport Util from '../../util/Util.js';\nimport SubSchema from '../views/registration/SubSchema.js';\n\nconst RegistrationControllerFooter = View.extend({\n  template: _Handlebars2.template({\n    \"compiler\": [8, \">= 4.3.0\"],\n    \"main\": function (container, depth0, helpers, partials, data) {\n      var lookupProperty = container.lookupProperty || function (parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n\n        return undefined;\n      };\n\n      return \"<a href=\\\"#\\\" class=\\\"link help\\\" data-se=\\\"back-link\\\">\" + container.escapeExpression((lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n        \"name\": \"i18n\",\n        \"hash\": {\n          \"bundle\": \"login\",\n          \"code\": \"goback\"\n        },\n        \"data\": data,\n        \"loc\": {\n          \"start\": {\n            \"line\": 1,\n            \"column\": 50\n          },\n          \"end\": {\n            \"line\": 1,\n            \"column\": 87\n          }\n        }\n      })) + \"</a>\";\n    },\n    \"useData\": true\n  }),\n  className: 'auth-footer',\n  events: {\n    'click .help': function (e) {\n      e.preventDefault();\n      this.back();\n    }\n  },\n  back: function () {\n    this.state.set('navigateDir', Enums.DIRECTION_BACK);\n    this.options.appState.trigger('navigate', '');\n  }\n});\nvar RegistrationController = BaseLoginController.extend({\n  className: 'registration',\n  initialize: function () {\n    const RegistrationControllerSchema = RegistrationSchema.extend({\n      settings: this.options.settings,\n      url: this.options.settings.get('baseUrl') + '/api/v1/registration/form'\n    }); // setup schema\n\n    const schema = new RegistrationControllerSchema();\n    this.state.set('schema', schema);\n  },\n  getRegistrationApiUrl: function () {\n    const defaultPolicyId = this.settings.get('defaultPolicyId'); // default policyId\n\n    const orgPolicyId = this.options.settings.get('policyId'); // org policyId\n\n    const apiUrl = defaultPolicyId ? this.getRegistrationPolicyApi(defaultPolicyId) : this.getRegistrationPolicyApi(orgPolicyId);\n    return apiUrl;\n  },\n  getRegistrationPolicyApi: function (policyId) {\n    return this.options.settings.get('baseUrl') + '/api/v1/registration/' + policyId;\n  },\n  doPostSubmit: function () {\n    if (this.model.get('activationToken')) {\n      const self = this; // register via activation token\n\n      self.settings.callGlobalSuccess(Enums.REGISTRATION_COMPLETE, {\n        activationToken: this.model.get('activationToken')\n      });\n      const loginModel = new LoginModel({\n        settings: self.model.appState.settings\n      });\n      loginModel.loginWithActivationToken(this.model.get('activationToken')).then(function (transaction) {\n        self.model.trigger('setTransaction', transaction);\n      });\n    } else {\n      // register via activation email\n      this.model.appState.set('username', this.model.get('email'));\n      this.model.appState.trigger('navigate', 'signin/register-complete');\n    }\n  },\n  registerUser: function (postData) {\n    const self = this;\n    Object.keys(postData).forEach(k => (oktaUnderscore.isNull(postData[k]) || oktaUnderscore.isUndefined(postData[k]) || postData[k] === '') && delete postData[k]);\n    this.model.attributes = postData; // Model.save returns a jqXHR\n\n    Backbone.Model.prototype.save.call(this.model).then(function () {\n      self.model.trigger('startSaving');\n      const activationToken = self.model.get('activationToken');\n      const postSubmitData = activationToken ? activationToken : self.model.get('email');\n      self.settings.postRegistrationSubmit(postSubmitData, function () {\n        self.doPostSubmit();\n      }, function (errors) {\n        self.showErrors(errors);\n      });\n    }).fail(err => {\n      const responseJSON = err.responseJSON;\n\n      if (responseJSON && responseJSON.errorCauses.length) {\n        const {\n          errorCode: errorCode,\n          errorCauses: errorCauses\n        } = responseJSON;\n        const {\n          errorSummary: errorSummary,\n          reason: reason,\n          location: location\n        } = errorCauses[0];\n        const isNotUniqueValue = errorCode === 'E0000001' && reason === 'UNIQUE_CONSTRAINT';\n\n        if (isNotUniqueValue) {\n          this.renderIsNotUniqueError(responseJSON);\n        }\n\n        this.renderLegacyLocationErrorIfNeeded(location, errorSummary);\n        Util.triggerAfterError(this, new RegistrationError(errorSummary));\n      }\n    });\n  },\n  renderIsNotUniqueError: function (error) {\n    const {\n      location: location\n    } = error.errorCauses[0];\n    const errorSummary = loc('registration.error.userName.notUniqueWithinOrg', 'login', [location]); // replace generic error message with more specific one\n    // without using backbone events because there was a race condition\n    // between clearing and triggering errors\n\n    this.$el.find('.okta-form-infobox-error p').text(errorSummary);\n  },\n  renderLegacyLocationErrorIfNeeded: function (location, errorSummary) {\n    // replace generic error message with errorSummary for v1 SIW\n    // this makes sure that with legacy location that starts with `data.userProfile`\n    // we still see the errorSummary in the error banner instead of only a generic error\n    // See example in https://developer.okta.com/docs/reference/registration-hook/#sample-json-payload-of-request\n    if (location && /^data\\.userProfile.*/.test(location)) {\n      this.$el.find('.okta-form-infobox-error p').text(errorSummary);\n    }\n  },\n  createRegistrationModel: function (modelProperties) {\n    const self = this;\n    const RegistrationControllerModel = Model.extend({\n      url: self.getRegistrationApiUrl() + '/register',\n      settings: this.settings,\n      appState: this.options.appState,\n      props: modelProperties,\n      local: {\n        activationToken: 'string'\n      },\n      toJSON: function () {\n        const data = Model.prototype.toJSON.apply(this, arguments);\n        return {\n          userProfile: data,\n          relayState: this.settings.get('relayState')\n        };\n      },\n      parse: function (resp) {\n        this.set('activationToken', resp.activationToken);\n        delete resp.activationToken;\n        return resp;\n      },\n      save: function () {\n        this.settings.preRegistrationSubmit(this.attributes, function (postData) {\n          self.registerUser(postData);\n        }, function (errors) {\n          self.showErrors(errors);\n        });\n      }\n    });\n    return new RegistrationControllerModel();\n  },\n  showErrors: function (error, hideRegisterButton) {\n    //for parseSchema error hide form and show error at form level\n    if (error.callback === 'parseRegistrationSchema' && error.errorCauses) {\n      error.errorSummary = oktaUnderscore.clone(error.errorCauses[0].errorSummary);\n      delete error.errorCauses;\n    } //show error on form\n\n\n    this.model.trigger('error', this.model, {\n      responseJSON: error\n    }); //throw registration error\n\n    const errMsg = error.callback ? error.callback + ':' + error.errorSummary : error.errorSummary;\n    Util.triggerAfterError(this, new RegistrationError(errMsg));\n\n    if (hideRegisterButton) {\n      this.$el.find('.button-primary').hide();\n    }\n  },\n  fetchInitialData: function () {\n    const self = this; // register parse complete event listener\n\n    self.state.get('schema').on('parseComplete', function (updatedSchema) {\n      const modelProperties = updatedSchema.properties.createModelProperties();\n      self.settings.set('defaultPolicyId', updatedSchema.properties.defaultPolicyId); // create model\n\n      self.model = self.createRegistrationModel(modelProperties); // create form\n\n      const RegistrationControllerForm = Form.extend({\n        layout: 'o-form-theme',\n        autoSave: true,\n        noCancelButton: true,\n        title: loc('registration.form.title', 'login'),\n        save: loc('registration.form.submit', 'login'),\n        modelEvents: {\n          'invalid': 'modifyErrors'\n        },\n        hasSavingState: true,\n        customSavingState: {\n          start: 'startSaving',\n          stop: 'stopSaving'\n        },\n        modifyErrors: function (model, errorResp) {\n          // overwrite courage errorResp object to show custom error message\n          for (let formFieldName in errorResp) {\n            if (errorResp[formFieldName] === 'model.validation.field.string.minLength') {\n              errorResp[formFieldName] = loc('registration.model.validation.field.string.too.short', 'login', [model.props[formFieldName].minLength]);\n            } else if (errorResp[formFieldName] === 'model.validation.field.string.maxLength') {\n              errorResp[formFieldName] = loc('registration.model.validation.field.string.too.long', 'login', [model.props[formFieldName].maxLength + 1]);\n            }\n          }\n        }\n      });\n      const form = new RegistrationControllerForm(self.toJSON()); // add form\n\n      self.add(form); // add footer\n\n      self.footer = new self.Footer(self.toJSON());\n      self.add(self.footer);\n      self.addListeners();\n\n      if (updatedSchema.error) {\n        self.showErrors(updatedSchema.error, true);\n      } else {\n        // add fields\n        updatedSchema.properties.each(function (schemaProperty) {\n          const inputOptions = RegistrationFormFactory.createInputOptions(schemaProperty);\n          const subSchemas = schemaProperty.get('subSchemas');\n          const name = schemaProperty.get('name');\n          form.addInput(inputOptions);\n\n          if (name === 'password' && subSchemas) {\n            form.add(SubSchema.extend({\n              id: 'subschemas-' + name,\n              subSchemas: subSchemas\n            }));\n          }\n        });\n\n        const requiredFieldsLabel = _Handlebars2.template({\n          \"compiler\": [8, \">= 4.3.0\"],\n          \"main\": function (container, depth0, helpers, partials, data) {\n            var helper,\n                lookupProperty = container.lookupProperty || function (parent, propertyName) {\n              if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                return parent[propertyName];\n              }\n\n              return undefined;\n            };\n\n            return \"<span class=\\\"required-fields-label\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"label\") || (depth0 != null ? lookupProperty(depth0, \"label\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n              \"name\": \"label\",\n              \"hash\": {},\n              \"data\": data,\n              \"loc\": {\n                \"start\": {\n                  \"line\": 1,\n                  \"column\": 36\n                },\n                \"end\": {\n                  \"line\": 1,\n                  \"column\": 45\n                }\n              }\n            }) : helper)) + \"</span>\";\n          },\n          \"useData\": true\n        })({\n          label: loc('registration.required.fields.label', 'login')\n        });\n\n        form.add(requiredFieldsLabel);\n      }\n    }); // fetch schema from API, returns a jqXHR. Wrap it in a Q\n\n    return Q(this.state.get('schema').fetch());\n  },\n  Footer: RegistrationControllerFooter\n});\n\nexport { RegistrationController as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}