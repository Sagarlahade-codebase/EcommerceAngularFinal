{"ast":null,"code":"import _Handlebars2 from '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport { loc, View } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/handle-url.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-base64.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-i18n.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-img.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-markdown.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-xsrfTokenInput.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport Q from 'q';\nimport fn$1 from '../../util/BrowserFeatures.js';\nimport fn from '../../util/CryptoUtil.js';\nimport { WebauthnAbortError, WebAuthnError } from '../../util/Errors.js';\nimport FormController from '../util/FormController.js';\nimport FormType from '../util/FormType.js';\nimport webauthn from '../../util/webauthn.js';\nimport Footer from '../views/enroll-factors/Footer.js';\nimport HtmlErrorMessageView from '../views/mfa-verify/HtmlErrorMessageView.js';\nfunction getExcludeCredentials(credentials) {\n  const excludeCredentials = [];\n  oktaUnderscore.each(credentials, function (credential) {\n    excludeCredentials.push({\n      type: 'public-key',\n      id: fn.strToBin(credential.id)\n    });\n  });\n  return excludeCredentials;\n}\nvar EnrollWebauthnController = FormController.extend({\n  className: 'enroll-webauthn',\n  Model: {\n    local: {\n      __enrolled__: 'boolean'\n    },\n    save: function () {\n      this.trigger('request');\n      if (this.get('__enrolled__')) {\n        return this.activate();\n      }\n      return this.doTransaction(function (transaction) {\n        const factor = oktaUnderscore.findWhere(transaction.factors, {\n          factorType: 'webauthn',\n          provider: 'FIDO'\n        });\n        return factor.enroll();\n      });\n    },\n    activate: function () {\n      this.set('__enrolled__', true);\n      this.trigger('errors:clear');\n      this.appState.on('backToFactors', () => {\n        if (this.webauthnAbortController) {\n          this.webauthnAbortController.abort();\n          this.webauthnAbortController = null;\n        }\n      });\n      return this.doTransaction(function (transaction) {\n        const activation = transaction.factor.activation; // enroll via browser webauthn js\n\n        const self = this;\n        if (webauthn.isNewApiAvailable()) {\n          const options = oktaUnderscore.extend({}, activation, {\n            challenge: fn.strToBin(activation.challenge),\n            user: {\n              id: fn.strToBin(activation.user.id),\n              name: activation.user.name,\n              displayName: activation.user.displayName\n            },\n            excludeCredentials: getExcludeCredentials(activation.excludeCredentials)\n          }); // AbortController is not supported in IE11\n\n          if (typeof AbortController !== 'undefined') {\n            self.webauthnAbortController = new AbortController();\n          }\n          return new Q(navigator.credentials.create({\n            publicKey: options,\n            signal: self.webauthnAbortController && self.webauthnAbortController.signal\n          })).then(function (newCredential) {\n            return transaction.activate({\n              attestation: fn.binToStr(newCredential.response.attestationObject),\n              clientData: fn.binToStr(newCredential.response.clientDataJSON)\n            });\n          }).catch(function (error) {\n            self.trigger('errors:clear'); // Do not display if it is abort error triggered by code when switching.\n            // self.webauthnAbortController would be null if abort was triggered by code.\n\n            if (!self.webauthnAbortController) {\n              throw new WebauthnAbortError();\n            } else {\n              throw new WebAuthnError({\n                xhr: {\n                  responseJSON: {\n                    errorSummary: error.message\n                  }\n                }\n              });\n            }\n          }).finally(function () {\n            // unset webauthnAbortController on successful authentication or error\n            self.webauthnAbortController = null;\n          });\n        }\n      });\n    }\n  },\n  Form: {\n    title: oktaUnderscore.partial(loc, 'enroll.webauthn.biometric.title', 'login'),\n    save: oktaUnderscore.partial(loc, 'enroll.webauthn.save', 'login'),\n    noCancelButton: true,\n    hasSavingState: false,\n    autoSave: true,\n    className: 'enroll-webauthn-form',\n    noButtonBar: function () {\n      return !webauthn.isNewApiAvailable();\n    },\n    modelEvents: {\n      request: '_startEnrollment',\n      error: '_stopEnrollment'\n    },\n    formChildren: function () {\n      const children = [];\n      if (webauthn.isNewApiAvailable()) {\n        //enroll.webauthn.biometric.instructions.edge is unescaped because it contains html\n        children.push(FormType.View({\n          View: View.extend({\n            className: 'webauthn-enroll-text',\n            template: _Handlebars2.template({\n              \"1\": function (container, depth0, helpers, partials, data) {\n                var stack1,\n                  lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                    if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                      return parent[propertyName];\n                    }\n                    return undefined;\n                  };\n                return \"<div class=\\\"webauthn-edge-text\\\"><p>\" + ((stack1 = (lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n                  \"name\": \"i18n\",\n                  \"hash\": {\n                    \"bundle\": \"login\",\n                    \"code\": \"enroll.webauthn.biometric.instructions.edge\"\n                  },\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 173\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 249\n                    }\n                  }\n                })) != null ? stack1 : \"\") + \"</p></div>\";\n              },\n              \"3\": function (container, depth0, helpers, partials, data) {\n                var stack1,\n                  lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                    if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                      return parent[propertyName];\n                    }\n                    return undefined;\n                  };\n                return \"<div class=\\\"webauthn-restrictions-text\\\"><p>\" + ((stack1 = (lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n                  \"name\": \"i18n\",\n                  \"hash\": {\n                    \"bundle\": \"login\",\n                    \"code\": \"enroll.webauthn.instructions.noSupportForBiometric\"\n                  },\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 340\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 423\n                    }\n                  }\n                })) != null ? stack1 : \"\") + \"</p></div>\";\n              },\n              \"compiler\": [8, \">= 4.3.0\"],\n              \"main\": function (container, depth0, helpers, partials, data) {\n                var stack1,\n                  alias1 = depth0 != null ? depth0 : container.nullContext || {},\n                  lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                    if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                      return parent[propertyName];\n                    }\n                    return undefined;\n                  };\n                return \"<div class=\\\"webauthn-enroll-instructions\\\"><p>\" + container.escapeExpression((lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(alias1, {\n                  \"name\": \"i18n\",\n                  \"hash\": {\n                    \"bundle\": \"login\",\n                    \"code\": \"enroll.webauthn.biometric.instructions\"\n                  },\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 45\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 114\n                    }\n                  }\n                })) + \"</p></div>\" + ((stack1 = lookupProperty(helpers, \"if\").call(alias1, depth0 != null ? lookupProperty(depth0, \"isEdge\") : depth0, {\n                  \"name\": \"if\",\n                  \"hash\": {},\n                  \"fn\": container.program(1, data, 0),\n                  \"inverse\": container.noop,\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 124\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 266\n                    }\n                  }\n                })) != null ? stack1 : \"\") + ((stack1 = lookupProperty(helpers, \"if\").call(alias1, depth0 != null ? lookupProperty(depth0, \"onlySupportsSecurityKey\") : depth0, {\n                  \"name\": \"if\",\n                  \"hash\": {},\n                  \"fn\": container.program(3, data, 0),\n                  \"inverse\": container.noop,\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 266\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 440\n                    }\n                  }\n                })) != null ? stack1 : \"\") + \"<div data-se=\\\"webauthn-waiting\\\" class=\\\"okta-waiting-spinner hide\\\"></div>\";\n              },\n              \"useData\": true\n            }),\n            getTemplateData: function () {\n              return {\n                isEdge: fn$1.isEdge(),\n                onlySupportsSecurityKey: (fn$1.isFirefox() || fn$1.isSafari()) && fn$1.isMac()\n              };\n            }\n          })\n        }));\n      } else {\n        let errorMessageKey = 'webauthn.biometric.error.factorNotSupported';\n        if (this.options.appState.get('factors').length === 1) {\n          errorMessageKey = 'webauthn.biometric.error.factorNotSupported.oneFactor';\n        }\n        children.push(FormType.View({\n          View: new HtmlErrorMessageView({\n            message: loc(errorMessageKey, 'login')\n          })\n        }, {\n          selector: '.o-form-error-container'\n        }));\n      }\n      return children;\n    },\n    _startEnrollment: function () {\n      this.$('.okta-waiting-spinner').show();\n      this.$('.o-form-button-bar').hide();\n    },\n    _stopEnrollment: function () {\n      this.$('.okta-waiting-spinner').hide();\n      this.$('.o-form-button-bar').show();\n    }\n  },\n  Footer: Footer,\n  trapAuthResponse: function () {\n    if (this.options.appState.get('isMfaEnrollActivate')) {\n      this.model.activate();\n      return true;\n    }\n  }\n});\nexport { EnrollWebauthnController as default };","map":{"version":3,"names":["_Handlebars2","loc","View","oktaUnderscore","Q","fn$1","fn","WebauthnAbortError","WebAuthnError","FormController","FormType","webauthn","Footer","HtmlErrorMessageView","getExcludeCredentials","credentials","excludeCredentials","each","credential","push","type","id","strToBin","EnrollWebauthnController","extend","className","Model","local","__enrolled__","save","trigger","get","activate","doTransaction","transaction","factor","findWhere","factors","factorType","provider","enroll","set","appState","on","webauthnAbortController","abort","activation","self","isNewApiAvailable","options","challenge","user","name","displayName","AbortController","navigator","create","publicKey","signal","then","newCredential","attestation","binToStr","response","attestationObject","clientData","clientDataJSON","catch","error","xhr","responseJSON","errorSummary","message","finally","Form","title","partial","noCancelButton","hasSavingState","autoSave","noButtonBar","modelEvents","request","formChildren","children","template","1","container","depth0","helpers","partials","data","stack1","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","hooks","helperMissing","nullContext","3","main","alias1","escapeExpression","program","noop","getTemplateData","isEdge","onlySupportsSecurityKey","isFirefox","isSafari","isMac","errorMessageKey","length","selector","_startEnrollment","$","show","hide","_stopEnrollment","trapAuthResponse","model","default"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v1/controllers/EnrollWebauthnController.js"],"sourcesContent":["import _Handlebars2 from '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport { loc, View } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/handle-url.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-base64.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-i18n.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-img.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-markdown.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/handlebars/helper-xsrfTokenInput.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport Q from 'q';\nimport fn$1 from '../../util/BrowserFeatures.js';\nimport fn from '../../util/CryptoUtil.js';\nimport { WebauthnAbortError, WebAuthnError } from '../../util/Errors.js';\nimport FormController from '../util/FormController.js';\nimport FormType from '../util/FormType.js';\nimport webauthn from '../../util/webauthn.js';\nimport Footer from '../views/enroll-factors/Footer.js';\nimport HtmlErrorMessageView from '../views/mfa-verify/HtmlErrorMessageView.js';\n\nfunction getExcludeCredentials(credentials) {\n  const excludeCredentials = [];\n\n  oktaUnderscore.each(credentials, function (credential) {\n    excludeCredentials.push({\n      type: 'public-key',\n      id: fn.strToBin(credential.id)\n    });\n  });\n\n  return excludeCredentials;\n}\n\nvar EnrollWebauthnController = FormController.extend({\n  className: 'enroll-webauthn',\n  Model: {\n    local: {\n      __enrolled__: 'boolean'\n    },\n    save: function () {\n      this.trigger('request');\n\n      if (this.get('__enrolled__')) {\n        return this.activate();\n      }\n\n      return this.doTransaction(function (transaction) {\n        const factor = oktaUnderscore.findWhere(transaction.factors, {\n          factorType: 'webauthn',\n          provider: 'FIDO'\n        });\n\n        return factor.enroll();\n      });\n    },\n    activate: function () {\n      this.set('__enrolled__', true);\n      this.trigger('errors:clear');\n      this.appState.on('backToFactors', () => {\n        if (this.webauthnAbortController) {\n          this.webauthnAbortController.abort();\n          this.webauthnAbortController = null;\n        }\n      });\n      return this.doTransaction(function (transaction) {\n        const activation = transaction.factor.activation; // enroll via browser webauthn js\n\n        const self = this;\n\n        if (webauthn.isNewApiAvailable()) {\n          const options = oktaUnderscore.extend({}, activation, {\n            challenge: fn.strToBin(activation.challenge),\n            user: {\n              id: fn.strToBin(activation.user.id),\n              name: activation.user.name,\n              displayName: activation.user.displayName\n            },\n            excludeCredentials: getExcludeCredentials(activation.excludeCredentials)\n          }); // AbortController is not supported in IE11\n\n\n          if (typeof AbortController !== 'undefined') {\n            self.webauthnAbortController = new AbortController();\n          }\n\n          return new Q(navigator.credentials.create({\n            publicKey: options,\n            signal: self.webauthnAbortController && self.webauthnAbortController.signal\n          })).then(function (newCredential) {\n            return transaction.activate({\n              attestation: fn.binToStr(newCredential.response.attestationObject),\n              clientData: fn.binToStr(newCredential.response.clientDataJSON)\n            });\n          }).catch(function (error) {\n            self.trigger('errors:clear'); // Do not display if it is abort error triggered by code when switching.\n            // self.webauthnAbortController would be null if abort was triggered by code.\n\n            if (!self.webauthnAbortController) {\n              throw new WebauthnAbortError();\n            } else {\n              throw new WebAuthnError({\n                xhr: {\n                  responseJSON: {\n                    errorSummary: error.message\n                  }\n                }\n              });\n            }\n          }).finally(function () {\n            // unset webauthnAbortController on successful authentication or error\n            self.webauthnAbortController = null;\n          });\n        }\n      });\n    }\n  },\n  Form: {\n    title: oktaUnderscore.partial(loc, 'enroll.webauthn.biometric.title', 'login'),\n    save: oktaUnderscore.partial(loc, 'enroll.webauthn.save', 'login'),\n    noCancelButton: true,\n    hasSavingState: false,\n    autoSave: true,\n    className: 'enroll-webauthn-form',\n    noButtonBar: function () {\n      return !webauthn.isNewApiAvailable();\n    },\n    modelEvents: {\n      request: '_startEnrollment',\n      error: '_stopEnrollment'\n    },\n    formChildren: function () {\n      const children = [];\n\n      if (webauthn.isNewApiAvailable()) {\n        //enroll.webauthn.biometric.instructions.edge is unescaped because it contains html\n        children.push(FormType.View({\n          View: View.extend({\n            className: 'webauthn-enroll-text',\n            template: _Handlebars2.template({\n              \"1\": function (container, depth0, helpers, partials, data) {\n                var stack1,\n                    lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                  if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                    return parent[propertyName];\n                  }\n\n                  return undefined;\n                };\n\n                return \"<div class=\\\"webauthn-edge-text\\\"><p>\" + ((stack1 = (lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n                  \"name\": \"i18n\",\n                  \"hash\": {\n                    \"bundle\": \"login\",\n                    \"code\": \"enroll.webauthn.biometric.instructions.edge\"\n                  },\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 173\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 249\n                    }\n                  }\n                })) != null ? stack1 : \"\") + \"</p></div>\";\n              },\n              \"3\": function (container, depth0, helpers, partials, data) {\n                var stack1,\n                    lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                  if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                    return parent[propertyName];\n                  }\n\n                  return undefined;\n                };\n\n                return \"<div class=\\\"webauthn-restrictions-text\\\"><p>\" + ((stack1 = (lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n                  \"name\": \"i18n\",\n                  \"hash\": {\n                    \"bundle\": \"login\",\n                    \"code\": \"enroll.webauthn.instructions.noSupportForBiometric\"\n                  },\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 340\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 423\n                    }\n                  }\n                })) != null ? stack1 : \"\") + \"</p></div>\";\n              },\n              \"compiler\": [8, \">= 4.3.0\"],\n              \"main\": function (container, depth0, helpers, partials, data) {\n                var stack1,\n                    alias1 = depth0 != null ? depth0 : container.nullContext || {},\n                    lookupProperty = container.lookupProperty || function (parent, propertyName) {\n                  if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                    return parent[propertyName];\n                  }\n\n                  return undefined;\n                };\n\n                return \"<div class=\\\"webauthn-enroll-instructions\\\"><p>\" + container.escapeExpression((lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(alias1, {\n                  \"name\": \"i18n\",\n                  \"hash\": {\n                    \"bundle\": \"login\",\n                    \"code\": \"enroll.webauthn.biometric.instructions\"\n                  },\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 45\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 114\n                    }\n                  }\n                })) + \"</p></div>\" + ((stack1 = lookupProperty(helpers, \"if\").call(alias1, depth0 != null ? lookupProperty(depth0, \"isEdge\") : depth0, {\n                  \"name\": \"if\",\n                  \"hash\": {},\n                  \"fn\": container.program(1, data, 0),\n                  \"inverse\": container.noop,\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 124\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 266\n                    }\n                  }\n                })) != null ? stack1 : \"\") + ((stack1 = lookupProperty(helpers, \"if\").call(alias1, depth0 != null ? lookupProperty(depth0, \"onlySupportsSecurityKey\") : depth0, {\n                  \"name\": \"if\",\n                  \"hash\": {},\n                  \"fn\": container.program(3, data, 0),\n                  \"inverse\": container.noop,\n                  \"data\": data,\n                  \"loc\": {\n                    \"start\": {\n                      \"line\": 1,\n                      \"column\": 266\n                    },\n                    \"end\": {\n                      \"line\": 1,\n                      \"column\": 440\n                    }\n                  }\n                })) != null ? stack1 : \"\") + \"<div data-se=\\\"webauthn-waiting\\\" class=\\\"okta-waiting-spinner hide\\\"></div>\";\n              },\n              \"useData\": true\n            }),\n            getTemplateData: function () {\n              return {\n                isEdge: fn$1.isEdge(),\n                onlySupportsSecurityKey: (fn$1.isFirefox() || fn$1.isSafari()) && fn$1.isMac()\n              };\n            }\n          })\n        }));\n      } else {\n        let errorMessageKey = 'webauthn.biometric.error.factorNotSupported';\n\n        if (this.options.appState.get('factors').length === 1) {\n          errorMessageKey = 'webauthn.biometric.error.factorNotSupported.oneFactor';\n        }\n\n        children.push(FormType.View({\n          View: new HtmlErrorMessageView({\n            message: loc(errorMessageKey, 'login')\n          })\n        }, {\n          selector: '.o-form-error-container'\n        }));\n      }\n\n      return children;\n    },\n    _startEnrollment: function () {\n      this.$('.okta-waiting-spinner').show();\n      this.$('.o-form-button-bar').hide();\n    },\n    _stopEnrollment: function () {\n      this.$('.okta-waiting-spinner').hide();\n      this.$('.o-form-button-bar').show();\n    }\n  },\n  Footer: Footer,\n  trapAuthResponse: function () {\n    if (this.options.appState.get('isMfaEnrollActivate')) {\n      this.model.activate();\n      return true;\n    }\n  }\n});\n\nexport { EnrollWebauthnController as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}