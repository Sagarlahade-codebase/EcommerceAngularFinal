{"ast":null,"code":"import _asyncToGenerator from \"/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { getRemediator, handleIdxError, isTerminalResponse, filterValuesForRemediation, getNextStep } from './util.js';\nfunction getActionFromValues(values, idxResponse) {\n  return Object.keys(idxResponse.actions).find(action => !!values.resend && action.includes('-resend'));\n}\nfunction removeActionFromValues(values) {\n  return Object.assign(Object.assign({}, values), {\n    resend: undefined\n  });\n}\nfunction removeActionFromOptions(options, actionName) {\n  let actions = options.actions || [];\n  actions = actions.filter(entry => {\n    if (typeof entry === 'string') {\n      return entry !== actionName;\n    }\n    return entry.name !== actionName;\n  });\n  return Object.assign(Object.assign({}, options), {\n    actions\n  });\n}\nfunction remediate(_x, _x2, _x3, _x4) {\n  return _remediate.apply(this, arguments);\n}\nfunction _remediate() {\n  _remediate = _asyncToGenerator(function* (authClient, idxResponse, values, options) {\n    let {\n      neededToProceed,\n      interactionCode\n    } = idxResponse;\n    const {\n      flow\n    } = options;\n    if (interactionCode) {\n      return {\n        idxResponse\n      };\n    }\n    const remediator = getRemediator(neededToProceed, values, options);\n    const actionFromValues = getActionFromValues(values, idxResponse);\n    const actionFromOptions = options.actions || [];\n    const actions = [...actionFromOptions, ...(actionFromValues && [actionFromValues] || [])];\n    if (actions) {\n      for (let action of actions) {\n        let params = {};\n        if (typeof action !== 'string') {\n          params = action.params || {};\n          action = action.name;\n        }\n        let valuesWithoutExecutedAction = removeActionFromValues(values);\n        let optionsWithoutExecutedAction = removeActionFromOptions(options, action);\n        if (typeof idxResponse.actions[action] === 'function') {\n          try {\n            idxResponse = yield idxResponse.actions[action](params);\n            idxResponse = Object.assign(Object.assign({}, idxResponse), {\n              requestDidSucceed: true\n            });\n          } catch (e) {\n            return handleIdxError(authClient, e, options);\n          }\n          if (action === 'cancel') {\n            return {\n              idxResponse,\n              canceled: true\n            };\n          }\n          return remediate(authClient, idxResponse, valuesWithoutExecutedAction, optionsWithoutExecutedAction);\n        }\n        const remediationAction = neededToProceed.find(({\n          name\n        }) => name === action);\n        if (remediationAction) {\n          try {\n            idxResponse = yield idxResponse.proceed(action, params);\n            idxResponse = Object.assign(Object.assign({}, idxResponse), {\n              requestDidSucceed: true\n            });\n          } catch (e) {\n            return handleIdxError(authClient, e, options);\n          }\n          return remediate(authClient, idxResponse, values, optionsWithoutExecutedAction);\n        }\n      }\n    }\n    const terminal = isTerminalResponse(idxResponse);\n    if (terminal) {\n      return {\n        idxResponse,\n        terminal\n      };\n    }\n    if (!remediator) {\n      if (options.step) {\n        values = filterValuesForRemediation(idxResponse, options.step, values);\n        try {\n          idxResponse = yield idxResponse.proceed(options.step, values);\n          idxResponse = Object.assign(Object.assign({}, idxResponse), {\n            requestDidSucceed: true\n          });\n          return {\n            idxResponse\n          };\n        } catch (e) {\n          return handleIdxError(authClient, e, options);\n        }\n      }\n      if (flow === 'default') {\n        return {\n          idxResponse\n        };\n      }\n      throw new AuthSdkError(`\n      No remediation can match current flow, check policy settings in your org.\n      Remediations: [${neededToProceed.reduce((acc, curr) => acc ? acc + ' ,' + curr.name : curr.name, '')}]\n    `);\n    }\n    if (!remediator.canRemediate()) {\n      const nextStep = getNextStep(authClient, remediator, idxResponse);\n      return {\n        idxResponse,\n        nextStep\n      };\n    }\n    const name = remediator.getName();\n    const data = remediator.getData();\n    try {\n      idxResponse = yield idxResponse.proceed(name, data);\n      idxResponse = Object.assign(Object.assign({}, idxResponse), {\n        requestDidSucceed: true\n      });\n      values = remediator.getValuesAfterProceed();\n      options = Object.assign(Object.assign({}, options), {\n        step: undefined\n      });\n      if (options.useGenericRemediator && !idxResponse.interactionCode && !isTerminalResponse(idxResponse)) {\n        const gr = getRemediator(idxResponse.neededToProceed, values, options);\n        const nextStep = getNextStep(authClient, gr, idxResponse);\n        return {\n          idxResponse,\n          nextStep\n        };\n      }\n      return remediate(authClient, idxResponse, values, options);\n    } catch (e) {\n      return handleIdxError(authClient, e, options);\n    }\n  });\n  return _remediate.apply(this, arguments);\n}\nexport { remediate };","map":{"version":3,"names":["AuthSdkError","getRemediator","handleIdxError","isTerminalResponse","filterValuesForRemediation","getNextStep","getActionFromValues","values","idxResponse","Object","keys","actions","find","action","resend","includes","removeActionFromValues","assign","undefined","removeActionFromOptions","options","actionName","filter","entry","name","remediate","_x","_x2","_x3","_x4","_remediate","apply","arguments","_asyncToGenerator","authClient","neededToProceed","interactionCode","flow","remediator","actionFromValues","actionFromOptions","params","valuesWithoutExecutedAction","optionsWithoutExecutedAction","requestDidSucceed","e","canceled","remediationAction","proceed","terminal","step","reduce","acc","curr","canRemediate","nextStep","getName","data","getData","getValuesAfterProceed","useGenericRemediator","gr"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/idx/remediate.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { getRemediator, handleIdxError, isTerminalResponse, filterValuesForRemediation, getNextStep } from './util.js';\n\nfunction getActionFromValues(values, idxResponse) {\n    return Object.keys(idxResponse.actions).find(action => !!values.resend && action.includes('-resend'));\n}\nfunction removeActionFromValues(values) {\n    return Object.assign(Object.assign({}, values), { resend: undefined });\n}\nfunction removeActionFromOptions(options, actionName) {\n    let actions = options.actions || [];\n    actions = actions.filter(entry => {\n        if (typeof entry === 'string') {\n            return entry !== actionName;\n        }\n        return entry.name !== actionName;\n    });\n    return Object.assign(Object.assign({}, options), { actions });\n}\nasync function remediate(authClient, idxResponse, values, options) {\n    let { neededToProceed, interactionCode } = idxResponse;\n    const { flow } = options;\n    if (interactionCode) {\n        return { idxResponse };\n    }\n    const remediator = getRemediator(neededToProceed, values, options);\n    const actionFromValues = getActionFromValues(values, idxResponse);\n    const actionFromOptions = options.actions || [];\n    const actions = [\n        ...actionFromOptions,\n        ...(actionFromValues && [actionFromValues] || []),\n    ];\n    if (actions) {\n        for (let action of actions) {\n            let params = {};\n            if (typeof action !== 'string') {\n                params = action.params || {};\n                action = action.name;\n            }\n            let valuesWithoutExecutedAction = removeActionFromValues(values);\n            let optionsWithoutExecutedAction = removeActionFromOptions(options, action);\n            if (typeof idxResponse.actions[action] === 'function') {\n                try {\n                    idxResponse = await idxResponse.actions[action](params);\n                    idxResponse = Object.assign(Object.assign({}, idxResponse), { requestDidSucceed: true });\n                }\n                catch (e) {\n                    return handleIdxError(authClient, e, options);\n                }\n                if (action === 'cancel') {\n                    return { idxResponse, canceled: true };\n                }\n                return remediate(authClient, idxResponse, valuesWithoutExecutedAction, optionsWithoutExecutedAction);\n            }\n            const remediationAction = neededToProceed.find(({ name }) => name === action);\n            if (remediationAction) {\n                try {\n                    idxResponse = await idxResponse.proceed(action, params);\n                    idxResponse = Object.assign(Object.assign({}, idxResponse), { requestDidSucceed: true });\n                }\n                catch (e) {\n                    return handleIdxError(authClient, e, options);\n                }\n                return remediate(authClient, idxResponse, values, optionsWithoutExecutedAction);\n            }\n        }\n    }\n    const terminal = isTerminalResponse(idxResponse);\n    if (terminal) {\n        return { idxResponse, terminal };\n    }\n    if (!remediator) {\n        if (options.step) {\n            values = filterValuesForRemediation(idxResponse, options.step, values);\n            try {\n                idxResponse = await idxResponse.proceed(options.step, values);\n                idxResponse = Object.assign(Object.assign({}, idxResponse), { requestDidSucceed: true });\n                return { idxResponse };\n            }\n            catch (e) {\n                return handleIdxError(authClient, e, options);\n            }\n        }\n        if (flow === 'default') {\n            return { idxResponse };\n        }\n        throw new AuthSdkError(`\n      No remediation can match current flow, check policy settings in your org.\n      Remediations: [${neededToProceed.reduce((acc, curr) => acc ? acc + ' ,' + curr.name : curr.name, '')}]\n    `);\n    }\n    if (!remediator.canRemediate()) {\n        const nextStep = getNextStep(authClient, remediator, idxResponse);\n        return {\n            idxResponse,\n            nextStep,\n        };\n    }\n    const name = remediator.getName();\n    const data = remediator.getData();\n    try {\n        idxResponse = await idxResponse.proceed(name, data);\n        idxResponse = Object.assign(Object.assign({}, idxResponse), { requestDidSucceed: true });\n        values = remediator.getValuesAfterProceed();\n        options = Object.assign(Object.assign({}, options), { step: undefined });\n        if (options.useGenericRemediator && !idxResponse.interactionCode && !isTerminalResponse(idxResponse)) {\n            const gr = getRemediator(idxResponse.neededToProceed, values, options);\n            const nextStep = getNextStep(authClient, gr, idxResponse);\n            return {\n                idxResponse,\n                nextStep,\n            };\n        }\n        return remediate(authClient, idxResponse, values, options);\n    }\n    catch (e) {\n        return handleIdxError(authClient, e, options);\n    }\n}\n\nexport { remediate };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}