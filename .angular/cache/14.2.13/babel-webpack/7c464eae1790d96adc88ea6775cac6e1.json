{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { omit, getLink } from './util/object.js';\nimport { toQueryString } from './util/url.js';\nimport { get, post, httpRequest } from './http/request.js';\nfunction sessionExists(sdk) {\n  return sdk.session.get().then(function (res) {\n    if (res.status === 'ACTIVE') {\n      return true;\n    }\n    return false;\n  }).catch(function () {\n    return false;\n  });\n}\nfunction getSession(sdk) {\n  return get(sdk, '/api/v1/sessions/me', {\n    withCredentials: true\n  }).then(function (session) {\n    var res = omit(session, '_links');\n    res.refresh = function () {\n      return post(sdk, getLink(session, 'refresh').href, {}, {\n        withCredentials: true\n      });\n    };\n    res.user = function () {\n      return get(sdk, getLink(session, 'user').href, {\n        withCredentials: true\n      });\n    };\n    return res;\n  }).catch(function () {\n    return {\n      status: 'INACTIVE'\n    };\n  });\n}\nfunction closeSession(sdk) {\n  return httpRequest(sdk, {\n    url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n    method: 'DELETE',\n    withCredentials: true\n  });\n}\nfunction refreshSession(sdk) {\n  return post(sdk, '/api/v1/sessions/me/lifecycle/refresh', {}, {\n    withCredentials: true\n  });\n}\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n  redirectUrl = redirectUrl || window.location.href;\n  window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' + toQueryString({\n    checkAccountSetupComplete: true,\n    token: sessionToken,\n    redirectUrl: redirectUrl\n  }));\n}\nexport { closeSession, getSession, refreshSession, sessionExists, setCookieAndRedirect };","map":{"version":3,"names":["omit","getLink","toQueryString","get","post","httpRequest","sessionExists","sdk","session","then","res","status","catch","getSession","withCredentials","refresh","href","user","closeSession","url","getIssuerOrigin","method","refreshSession","setCookieAndRedirect","sessionToken","redirectUrl","window","location","assign","checkAccountSetupComplete","token"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/session.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { omit, getLink } from './util/object.js';\nimport { toQueryString } from './util/url.js';\nimport { get, post, httpRequest } from './http/request.js';\n\nfunction sessionExists(sdk) {\n    return sdk.session.get()\n        .then(function (res) {\n        if (res.status === 'ACTIVE') {\n            return true;\n        }\n        return false;\n    })\n        .catch(function () {\n        return false;\n    });\n}\nfunction getSession(sdk) {\n    return get(sdk, '/api/v1/sessions/me', { withCredentials: true })\n        .then(function (session) {\n        var res = omit(session, '_links');\n        res.refresh = function () {\n            return post(sdk, getLink(session, 'refresh').href, {}, { withCredentials: true });\n        };\n        res.user = function () {\n            return get(sdk, getLink(session, 'user').href, { withCredentials: true });\n        };\n        return res;\n    })\n        .catch(function () {\n        return { status: 'INACTIVE' };\n    });\n}\nfunction closeSession(sdk) {\n    return httpRequest(sdk, {\n        url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n        method: 'DELETE',\n        withCredentials: true\n    });\n}\nfunction refreshSession(sdk) {\n    return post(sdk, '/api/v1/sessions/me/lifecycle/refresh', {}, { withCredentials: true });\n}\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n    redirectUrl = redirectUrl || window.location.href;\n    window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' +\n        toQueryString({\n            checkAccountSetupComplete: true,\n            token: sessionToken,\n            redirectUrl: redirectUrl\n        }));\n}\n\nexport { closeSession, getSession, refreshSession, sessionExists, setCookieAndRedirect };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,IAAI,EAAEC,OAAO,QAAQ,kBAAkB;AAChD,SAASC,aAAa,QAAQ,eAAe;AAC7C,SAASC,GAAG,EAAEC,IAAI,EAAEC,WAAW,QAAQ,mBAAmB;AAE1D,SAASC,aAAaA,CAACC,GAAG,EAAE;EACxB,OAAOA,GAAG,CAACC,OAAO,CAACL,GAAG,CAAC,CAAC,CACnBM,IAAI,CAAC,UAAUC,GAAG,EAAE;IACrB,IAAIA,GAAG,CAACC,MAAM,KAAK,QAAQ,EAAE;MACzB,OAAO,IAAI;IACf;IACA,OAAO,KAAK;EAChB,CAAC,CAAC,CACGC,KAAK,CAAC,YAAY;IACnB,OAAO,KAAK;EAChB,CAAC,CAAC;AACN;AACA,SAASC,UAAUA,CAACN,GAAG,EAAE;EACrB,OAAOJ,GAAG,CAACI,GAAG,EAAE,qBAAqB,EAAE;IAAEO,eAAe,EAAE;EAAK,CAAC,CAAC,CAC5DL,IAAI,CAAC,UAAUD,OAAO,EAAE;IACzB,IAAIE,GAAG,GAAGV,IAAI,CAACQ,OAAO,EAAE,QAAQ,CAAC;IACjCE,GAAG,CAACK,OAAO,GAAG,YAAY;MACtB,OAAOX,IAAI,CAACG,GAAG,EAAEN,OAAO,CAACO,OAAO,EAAE,SAAS,CAAC,CAACQ,IAAI,EAAE,CAAC,CAAC,EAAE;QAAEF,eAAe,EAAE;MAAK,CAAC,CAAC;IACrF,CAAC;IACDJ,GAAG,CAACO,IAAI,GAAG,YAAY;MACnB,OAAOd,GAAG,CAACI,GAAG,EAAEN,OAAO,CAACO,OAAO,EAAE,MAAM,CAAC,CAACQ,IAAI,EAAE;QAAEF,eAAe,EAAE;MAAK,CAAC,CAAC;IAC7E,CAAC;IACD,OAAOJ,GAAG;EACd,CAAC,CAAC,CACGE,KAAK,CAAC,YAAY;IACnB,OAAO;MAAED,MAAM,EAAE;IAAW,CAAC;EACjC,CAAC,CAAC;AACN;AACA,SAASO,YAAYA,CAACX,GAAG,EAAE;EACvB,OAAOF,WAAW,CAACE,GAAG,EAAE;IACpBY,GAAG,EAAEZ,GAAG,CAACa,eAAe,CAAC,CAAC,GAAG,qBAAqB;IAClDC,MAAM,EAAE,QAAQ;IAChBP,eAAe,EAAE;EACrB,CAAC,CAAC;AACN;AACA,SAASQ,cAAcA,CAACf,GAAG,EAAE;EACzB,OAAOH,IAAI,CAACG,GAAG,EAAE,uCAAuC,EAAE,CAAC,CAAC,EAAE;IAAEO,eAAe,EAAE;EAAK,CAAC,CAAC;AAC5F;AACA,SAASS,oBAAoBA,CAAChB,GAAG,EAAEiB,YAAY,EAAEC,WAAW,EAAE;EAC1DA,WAAW,GAAGA,WAAW,IAAIC,MAAM,CAACC,QAAQ,CAACX,IAAI;EACjDU,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACrB,GAAG,CAACa,eAAe,CAAC,CAAC,GAAG,8BAA8B,GACzElB,aAAa,CAAC;IACV2B,yBAAyB,EAAE,IAAI;IAC/BC,KAAK,EAAEN,YAAY;IACnBC,WAAW,EAAEA;EACjB,CAAC,CAAC,CAAC;AACX;AAEA,SAASP,YAAY,EAAEL,UAAU,EAAES,cAAc,EAAEhB,aAAa,EAAEiB,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module"}