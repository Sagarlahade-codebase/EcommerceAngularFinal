{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { isFingerprintSupported } from '../features.js';\nimport { addListener, removeListener } from '../oidc/util/browser.js';\nimport '../idx/types/api.js';\nimport '../myaccount/types.js';\nfunction fingerprint(sdk, options) {\n  options = options || {};\n  if (!isFingerprintSupported()) {\n    return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n  }\n  var timeout;\n  var iframe;\n  var listener;\n  var promise = new Promise(function (resolve, reject) {\n    iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    listener = function listener(e) {\n      if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n        return;\n      }\n      try {\n        var msg = JSON.parse(e.data);\n      } catch (err) {\n        return;\n      }\n      if (!msg) {\n        return;\n      }\n      if (msg.type === 'FingerprintAvailable') {\n        return resolve(msg.fingerprint);\n      }\n      if (msg.type === 'FingerprintServiceReady') {\n        e.source.postMessage(JSON.stringify({\n          type: 'GetFingerprint'\n        }), e.origin);\n      }\n    };\n    addListener(window, 'message', listener);\n    iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n    document.body.appendChild(iframe);\n    timeout = setTimeout(function () {\n      reject(new AuthSdkError('Fingerprinting timed out'));\n    }, (options === null || options === void 0 ? void 0 : options.timeout) || 15000);\n  });\n  return promise.finally(function () {\n    clearTimeout(timeout);\n    removeListener(window, 'message', listener);\n    if (document.body.contains(iframe)) {\n      iframe.parentElement.removeChild(iframe);\n    }\n  });\n}\nexport { fingerprint as default };","map":{"version":3,"names":["AuthSdkError","isFingerprintSupported","addListener","removeListener","fingerprint","sdk","options","Promise","reject","timeout","iframe","listener","promise","resolve","document","createElement","style","display","e","data","origin","getIssuerOrigin","msg","JSON","parse","err","type","source","postMessage","stringify","window","src","body","appendChild","setTimeout","finally","clearTimeout","contains","parentElement","removeChild","default"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/browser/fingerprint.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport { isFingerprintSupported } from '../features.js';\nimport { addListener, removeListener } from '../oidc/util/browser.js';\nimport '../idx/types/api.js';\nimport '../myaccount/types.js';\n\nfunction fingerprint(sdk, options) {\n    options = options || {};\n    if (!isFingerprintSupported()) {\n        return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n    }\n    var timeout;\n    var iframe;\n    var listener;\n    var promise = new Promise(function (resolve, reject) {\n        iframe = document.createElement('iframe');\n        iframe.style.display = 'none';\n        listener = function listener(e) {\n            if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n                return;\n            }\n            try {\n                var msg = JSON.parse(e.data);\n            }\n            catch (err) {\n                return;\n            }\n            if (!msg) {\n                return;\n            }\n            if (msg.type === 'FingerprintAvailable') {\n                return resolve(msg.fingerprint);\n            }\n            if (msg.type === 'FingerprintServiceReady') {\n                e.source.postMessage(JSON.stringify({\n                    type: 'GetFingerprint'\n                }), e.origin);\n            }\n        };\n        addListener(window, 'message', listener);\n        iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n        document.body.appendChild(iframe);\n        timeout = setTimeout(function () {\n            reject(new AuthSdkError('Fingerprinting timed out'));\n        }, (options === null || options === void 0 ? void 0 : options.timeout) || 15000);\n    });\n    return promise.finally(function () {\n        clearTimeout(timeout);\n        removeListener(window, 'message', listener);\n        if (document.body.contains(iframe)) {\n            iframe.parentElement.removeChild(iframe);\n        }\n    });\n}\n\nexport { fingerprint as default };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,YAAY,MAAM,2BAA2B;AACpD,SAASC,sBAAsB,QAAQ,gBAAgB;AACvD,SAASC,WAAW,EAAEC,cAAc,QAAQ,yBAAyB;AACrE,OAAO,qBAAqB;AAC5B,OAAO,uBAAuB;AAE9B,SAASC,WAAWA,CAACC,GAAG,EAAEC,OAAO,EAAE;EAC/BA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAI,CAACL,sBAAsB,CAAC,CAAC,EAAE;IAC3B,OAAOM,OAAO,CAACC,MAAM,CAAC,IAAIR,YAAY,CAAC,gDAAgD,CAAC,CAAC;EAC7F;EACA,IAAIS,OAAO;EACX,IAAIC,MAAM;EACV,IAAIC,QAAQ;EACZ,IAAIC,OAAO,GAAG,IAAIL,OAAO,CAAC,UAAUM,OAAO,EAAEL,MAAM,EAAE;IACjDE,MAAM,GAAGI,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IACzCL,MAAM,CAACM,KAAK,CAACC,OAAO,GAAG,MAAM;IAC7BN,QAAQ,GAAG,SAASA,QAAQA,CAACO,CAAC,EAAE;MAC5B,IAAI,CAACA,CAAC,IAAI,CAACA,CAAC,CAACC,IAAI,IAAID,CAAC,CAACE,MAAM,KAAKf,GAAG,CAACgB,eAAe,CAAC,CAAC,EAAE;QACrD;MACJ;MACA,IAAI;QACA,IAAIC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACN,CAAC,CAACC,IAAI,CAAC;MAChC,CAAC,CACD,OAAOM,GAAG,EAAE;QACR;MACJ;MACA,IAAI,CAACH,GAAG,EAAE;QACN;MACJ;MACA,IAAIA,GAAG,CAACI,IAAI,KAAK,sBAAsB,EAAE;QACrC,OAAOb,OAAO,CAACS,GAAG,CAAClB,WAAW,CAAC;MACnC;MACA,IAAIkB,GAAG,CAACI,IAAI,KAAK,yBAAyB,EAAE;QACxCR,CAAC,CAACS,MAAM,CAACC,WAAW,CAACL,IAAI,CAACM,SAAS,CAAC;UAChCH,IAAI,EAAE;QACV,CAAC,CAAC,EAAER,CAAC,CAACE,MAAM,CAAC;MACjB;IACJ,CAAC;IACDlB,WAAW,CAAC4B,MAAM,EAAE,SAAS,EAAEnB,QAAQ,CAAC;IACxCD,MAAM,CAACqB,GAAG,GAAG1B,GAAG,CAACgB,eAAe,CAAC,CAAC,GAAG,kCAAkC;IACvEP,QAAQ,CAACkB,IAAI,CAACC,WAAW,CAACvB,MAAM,CAAC;IACjCD,OAAO,GAAGyB,UAAU,CAAC,YAAY;MAC7B1B,MAAM,CAAC,IAAIR,YAAY,CAAC,0BAA0B,CAAC,CAAC;IACxD,CAAC,EAAE,CAACM,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACG,OAAO,KAAK,KAAK,CAAC;EACpF,CAAC,CAAC;EACF,OAAOG,OAAO,CAACuB,OAAO,CAAC,YAAY;IAC/BC,YAAY,CAAC3B,OAAO,CAAC;IACrBN,cAAc,CAAC2B,MAAM,EAAE,SAAS,EAAEnB,QAAQ,CAAC;IAC3C,IAAIG,QAAQ,CAACkB,IAAI,CAACK,QAAQ,CAAC3B,MAAM,CAAC,EAAE;MAChCA,MAAM,CAAC4B,aAAa,CAACC,WAAW,CAAC7B,MAAM,CAAC;IAC5C;EACJ,CAAC,CAAC;AACN;AAEA,SAASN,WAAW,IAAIoC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}