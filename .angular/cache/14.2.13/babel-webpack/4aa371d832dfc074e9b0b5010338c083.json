{"ast":null,"code":"import _Handlebars2 from '../../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaJQueryStatic from '../../../util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport Keys from '../../../util/Keys.js';\nimport '../../../vendor/plugins/chosen.jquery.js';\nimport BaseInput from '../BaseInput.js';\nimport Util from '../../../util/Util.js';\nimport StringUtil from '../../../util/StringUtil.js';\nconst template = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n      alias1 = depth0 != null ? depth0 : container.nullContext || {},\n      alias2 = container.hooks.helperMissing,\n      alias3 = \"function\",\n      alias4 = container.escapeExpression,\n      lookupProperty = container.lookupProperty || function (parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined;\n      };\n    return \"<select id=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"inputId\") || (depth0 != null ? lookupProperty(depth0, \"inputId\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"inputId\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 12\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 23\n        }\n      }\n    }) : helper)) + \"\\\" name=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"name\") || (depth0 != null ? lookupProperty(depth0, \"name\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"name\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 31\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 39\n        }\n      }\n    }) : helper)) + \"\\\"></select>\";\n  },\n  \"useData\": true\n});\nconst option = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n      alias1 = depth0 != null ? depth0 : container.nullContext || {},\n      alias2 = container.hooks.helperMissing,\n      alias3 = \"function\",\n      alias4 = container.escapeExpression,\n      lookupProperty = container.lookupProperty || function (parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined;\n      };\n    return \"<option value=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"key\") || (depth0 != null ? lookupProperty(depth0, \"key\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"key\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 15\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 22\n        }\n      }\n    }) : helper)) + \"\\\">\" + alias4((helper = (helper = lookupProperty(helpers, \"value\") || (depth0 != null ? lookupProperty(depth0, \"value\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"value\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 24\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 33\n        }\n      }\n    }) : helper)) + \"</option>\";\n  },\n  \"useData\": true\n});\nconst CHOSEN_WINDOW_MARGIN = 20;\nconst isSafari = Util.isSafari; // Chosen has known problems when it's at the bottom of a container that has\n// overflow:hidden set. Because it attaches to the parent container, its\n// dropdown will be cut off in the UI. Any modal with a chosen select element\n// at the bottom will manifest this behavior.\n//\n// The fix (aside from replacing Chosen) is to change Chosen's behavior -\n// use the existing styles, but attach it to 'body' and position it correctly\n// so that it is not affected by a parent overflow.\n//\n// More details can be found in OKTA-46489, OKTA-83570\n\nconst CHOSEN_MAX_HEIGHT = 240;\nconst CHOSEN_Z_INDEX = 50000;\nfunction defer(fn) {\n  if (this.params.autoWidth) {\n    return fn.call(this);\n  } else {\n    return oktaUnderscore.defer(oktaUnderscore.bind(fn, this));\n  }\n}\nfunction findSelectWidth(self) {\n  self.$select.hide();\n  const select = oktaJQueryStatic(self.$select[0]).hide();\n  oktaJQueryStatic('body').append(select);\n  const width = self.params.width = select.width() * 1.2 + 'px';\n  self.$el.append(select.show());\n  return width;\n}\nfunction recalculateChosen($chosen, $results, $clone) {\n  const offset = $clone.offset();\n  $chosen.css({\n    left: offset.left,\n    top: offset.top\n  }); // Update the max-height to fit within the constraints of the window. This\n  // is especially important for modals because page scrolling is disabled.\n\n  const $win = oktaJQueryStatic(window);\n  const rHeight = $results.outerHeight();\n  const rBottom = rHeight + $results.offset().top - $win.scrollTop();\n  const wHeight = $win.height() - CHOSEN_WINDOW_MARGIN;\n  const maxHeight = Math.min(rHeight + wHeight - rBottom, CHOSEN_MAX_HEIGHT);\n  $results.css('max-height', maxHeight);\n}\nfunction handleKeyUpEvent($select, $chosen, $results) {\n  const $highlightedOption = $results.find('.active-result.highlighted');\n  $chosen.find('#' + $select.attr('id') + '_txt').attr('aria-activedescendant', $highlightedOption.attr('id')); // change the old selected item aria-selected to false\n  // and add add it to new item.\n\n  $results.find('[aria-selected=true]').attr('aria-selected', 'false');\n  $highlightedOption.attr('aria-selected', 'true'); // In case of Safari, add message to aria-live node to be read by screenreader.\n  // We need to do this special handling for Safari due to falkiness with aria-activedescendant\n  // handling. https://bit.ly/3z45IZF\n\n  if (isSafari()) {\n    // message read by screenReader i.e optionValue selected(United States selected)\n    const message = StringUtil.localize('oform.selectInput.country', 'courage', [$highlightedOption.text()]);\n    const elementId = $select.attr('id');\n    if (message !== '') {\n      oktaJQueryStatic(`#${elementId}_aria_div_id`).text(message);\n    }\n  }\n  const noResult = $results.find('li.no-results');\n  if (noResult.length) {\n    noResult.attr('role', 'alert');\n  }\n}\nfunction fixChosenModal($select, textPlaceholder) {\n  const $chosen = $select.next('.chzn-container');\n  const $clone = $chosen.clone();\n  const $results = $chosen.find('.chzn-results');\n  const $searchInput = $chosen.find('.chzn-search input[type=text]');\n  $searchInput.on('keyup', () => {\n    handleKeyUpEvent($select, $chosen, $results);\n  });\n  $chosen.addClass('closed'); // Will be used in SIW to fix screen reader focus.\n  // Use a hidden clone to maintain layout and calculate offset. This is\n  // necessary for more complex layouts (like adding a group rule) where\n  // the chosen element is floated.\n\n  $clone.css('visibility', 'hidden');\n  $clone.removeAttr('id');\n  $clone.find('li').removeAttr('id'); // Save the original styles - we'll revert to them when the select closes\n\n  const baseStyles = {\n    left: $chosen.css('left'),\n    top: $chosen.css('top'),\n    position: $chosen.css('position'),\n    float: $chosen.css('float'),\n    'z-index': $chosen.css('z-index')\n  };\n  $results.hide(); // Handler for any resize events that happen when the results list is open\n\n  const resizeHandler = oktaUnderscore.debounce(function () {\n    recalculateChosen($chosen, $results, $clone);\n  }, 10); // When the dropdown opens, attach it to body, with the correct absolute\n  // position coordinates\n\n  $select.off('.fixChosen'); // Remove events we could have added before\n\n  $select.on('liszt:showing_dropdown.fixChosen', function () {\n    $chosen.width($chosen.width());\n    $select.after($clone); // .chzn-container can trigger the vertical scrollbar if it causes scrollHeight > window height after append to\n    // the body. Force top -999999 to avoid the scrollbar so $chosen can find the right offset for relocation.\n\n    $chosen.css({\n      position: 'absolute',\n      float: 'none',\n      'z-index': CHOSEN_Z_INDEX,\n      top: -999999\n    });\n    oktaJQueryStatic('body').append($chosen);\n    oktaJQueryStatic('.chzn-search > :text').prop('placeholder', textPlaceholder);\n    $results.show();\n    recalculateChosen($chosen, $results, $clone); // Capture scroll events:\n    // - for forms that use fixed positioning (like editing attributes in\n    //   Profile Editor) - window scroll\n    // - for forms that are too long for the modal - o-form-content scroll\n\n    $select.parents().scroll(resizeHandler);\n    oktaJQueryStatic(window).on('resize scroll', resizeHandler);\n  });\n  $select.on('liszt:showing_dropdown', function () {\n    $chosen.removeClass('closed');\n  }); // When the dropdown closes or the element is removed, revert to the\n  // original styles and reattach it to its original placement in the dom.\n\n  $select.on('liszt:hiding_dropdown.fixChosen remove.fixChosen', function () {\n    $select.parents().off('scroll', resizeHandler);\n    oktaJQueryStatic(window).off('resize scroll', resizeHandler);\n    $chosen.css(baseStyles);\n    $results.hide();\n    $chosen.addClass('closed');\n    $results.css('max-height', CHOSEN_MAX_HEIGHT);\n    $clone.remove();\n    $select.after($chosen);\n  }); // Do not change the order of event listeners. This event must execute after \n  // \"liszt:hiding_dropdown.fixChosen remove.fixChosen\"\n\n  $select.on('liszt:hiding_dropdown.fixChosen', function () {\n    $searchInput.focus(); // set focus back to input only when the dropdown is closed\n  });\n}\nvar Select = BaseInput.extend({\n  className: 'o-form-select',\n  /**\n   * @Override\n   */\n  events: {\n    'change select': 'update',\n    'keyup .chzn-search > :text': function (e) {\n      if (Keys.isEsc(e)) {\n        this.$('.chzn-search > :text').val('');\n        e.stopPropagation();\n      }\n    }\n  },\n  constructor: function () {\n    this.template = template;\n    this.option = this.option || option;\n    BaseInput.apply(this, arguments);\n    this.params = this.options.params || {};\n  },\n  /**\n   * @Override\n   */\n  editMode: function () {\n    /* eslint max-statements: [2, 17] */\n    this.$el.html(template(this.options));\n    this.$select = this.$('select');\n    this.appendOptions(); // Fix a regression in jQuery 1.x on Firefox\n    // jQuery.val(value) prepends an empty option to the dropdown\n    // if value doesnt exist in the dropdown.\n    // http://bugs.jquery.com/ticket/13514\n\n    const value = this.getModelValue();\n    if (value) {\n      this.$select.val(value);\n    } else {\n      this.$('option:first-child').prop('selected', true);\n    }\n    this.$el.addClass('o-form-control');\n    if (this.params.chosen !== false) {\n      this.__applyChosen();\n    }\n    return this;\n  },\n  appendOptions: function () {\n    if (!this.getOptions()) {\n      return;\n    }\n    const options = this.getOptions();\n    const keys = Object.keys(options);\n    this.applySortByKey(keys);\n    keys.forEach(key => {\n      this.$select.append(this.option({\n        key: key,\n        value: options[key]\n      }));\n    });\n  },\n  applySortByKey: function (keys) {\n    const sortByKey = this.options.sortByKey;\n    if (!sortByKey) {\n      return;\n    }\n    if (sortByKey instanceof Function) {\n      keys.sort(sortByKey);\n    }\n    if (sortByKey === 'asc') {\n      keys.sort();\n    }\n    if (sortByKey === 'desc') {\n      keys.sort();\n      keys.reverse();\n    }\n  },\n  __applyChosen: function (update) {\n    let width = this.options.wide ? '100%' : this.params.width || '62%';\n    if (this.params.autoWidth) {\n      width = findSelectWidth(this);\n    }\n    defer.call(this, function () {\n      const searchThreshold = this.getParam('searchThreshold', 10);\n      if (!oktaUnderscore.result(this.options, 'autoRender') && update !== false) {\n        this.update();\n      }\n      this.$select.chosen({\n        width: width,\n        disable_search_threshold: searchThreshold,\n        //eslint-disable-line camelcase\n        placeholder_text: this.options['placeholder'],\n        //eslint-disable-line camelcase\n        search_contains: true //eslint-disable-line camelcase\n      }); //if options are more than search threshold, consider it as a combobox\n\n      const isComboBox = this.options && this.options.options && Object.keys(this.options.options).length > searchThreshold;\n      this.accessibilityUpdate(isComboBox, this.params);\n      fixChosenModal(this.$select, this.searchPlaceholder);\n      if (this.params.autoWidth) {\n        // fix a chosen css bug\n        this.$el.width(0);\n      }\n      this.model.trigger('form:resize');\n    });\n  },\n  /**\n   * @Override\n   */\n  val: function () {\n    return this.$select && this.$select.val();\n  },\n  /**\n   * @Override\n   */\n  focus: function () {\n    if (this.$select) {\n      return this.$select.focus();\n    }\n  },\n  /**\n   * @Override\n   */\n  toStringValue: function () {\n    const selectedOption = this.getModelValue();\n    let displayString = selectedOption;\n    const options = this.getOptions();\n    if (!oktaUnderscore.isEmpty(options)) {\n      displayString = options[selectedOption];\n    }\n    if (oktaUnderscore.isUndefined(displayString)) {\n      displayString = this.defaultValue();\n    }\n    return displayString || '';\n  },\n  /**\n   * Convert options to an object\n   * support input options that is a\n   * 1. a static object such as {key1: val1, key2: val2...}\n   * 2. a function to be called to return a static object\n   * will return an object with key-value pairs or with empty content\n   * @return {Object} The value\n   */\n  getOptions: function () {\n    let options = this.options.options;\n    if (oktaUnderscore.isFunction(options)) {\n      options = options.call(this);\n    }\n    return oktaUnderscore.isObject(options) ? options : {};\n  },\n  remove: function () {\n    if (this.$select) {\n      this.$select.trigger('remove');\n    }\n    return BaseInput.prototype.remove.apply(this, arguments);\n  },\n  /**\n   * @param ariaDivId id for div element\n   * Create a div element and add it to chosen container.\n   */\n  createAriaLiveNode: function (ariaDivId) {\n    const $chosen = this.$select.next('.chzn-container'); // set this to off-screen such that no user will see this and only screenReaders will pick this up.\n    // we should announce to user only on additions and not on removals.\n\n    const $node = oktaJQueryStatic('<div></div>').attr('role', 'log').attr('aria-live', 'polite').attr('id', ariaDivId).attr('aria-relevant', 'additions').attr('aria-atomic', 'false').attr('class', 'off-screen');\n    $node.insertAfter($chosen);\n  },\n  /**\n   * Code to make the select/combobox component accessible with screen readers.\n   *\n   * @param {boolean} isComboBox - Is the select a combobox?\n   * @param {object} params - params like aria label\n   */\n  // eslint-disable-next-line max-statements\n  accessibilityUpdate: function (isComboBox, params) {\n    const txtBoxId = this.$select.attr('id') + '_txt';\n    const ariaDivId = this.$select.attr('id') + '_aria_div_id';\n    const ulTagId = this.$select.attr('id') + '_ul'; // this is to fix(OKTA-506711) the accessibility issue due to partial support of aria-activedescendant\n    // by Safari. Make use of aria-live to make screenReader announce the option selected by user as a workaround.\n\n    if (isSafari()) {\n      this.createAriaLiveNode(ariaDivId);\n    }\n    this.$('ul[class=chzn-results]').attr('role', 'listbox').attr('id', ulTagId);\n    if (isComboBox) {\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-autocomplete', 'list').attr('aria-activedescendant', '').attr('role', 'combobox').attr('aria-expanded', 'true').attr('aria-controls', ulTagId);\n    } else {\n      this.$('input[type=text]').attr('id', txtBoxId).attr('role', 'listbox');\n    }\n    if (params && params.aria && params.aria.label) {\n      const ariaLabel = params.aria.label.trim();\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-label', ariaLabel);\n      this.$('ul[class=chzn-results]').attr('aria-label', ariaLabel);\n    } else {\n      const ariaLabel = this.$el.parent().prev('.o-form-label').find('label').text().trim();\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-label', ariaLabel);\n      this.$('ul[class=chzn-results]').attr('aria-label', ariaLabel);\n    }\n    this.$('.chzn-results .active-result').attr('role', 'option').attr('aria-selected', 'false');\n  }\n});\nexport { Select as default };","map":{"version":3,"names":["_Handlebars2","oktaJQueryStatic","oktaUnderscore","Keys","BaseInput","Util","StringUtil","template","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","option","CHOSEN_WINDOW_MARGIN","isSafari","CHOSEN_MAX_HEIGHT","CHOSEN_Z_INDEX","defer","fn","params","autoWidth","bind","findSelectWidth","self","$select","hide","select","append","width","$el","show","recalculateChosen","$chosen","$results","$clone","offset","css","left","top","$win","window","rHeight","outerHeight","rBottom","scrollTop","wHeight","height","maxHeight","Math","min","handleKeyUpEvent","$highlightedOption","find","attr","message","localize","text","elementId","noResult","length","fixChosenModal","textPlaceholder","next","clone","$searchInput","on","addClass","removeAttr","baseStyles","position","float","resizeHandler","debounce","off","after","prop","parents","scroll","removeClass","remove","focus","Select","extend","className","events","keyup .chzn-search > :text","e","isEsc","$","val","stopPropagation","constructor","apply","arguments","options","editMode","html","appendOptions","value","getModelValue","chosen","__applyChosen","getOptions","keys","applySortByKey","forEach","key","sortByKey","Function","sort","reverse","update","wide","searchThreshold","getParam","result","disable_search_threshold","placeholder_text","search_contains","isComboBox","accessibilityUpdate","searchPlaceholder","model","trigger","toStringValue","selectedOption","displayString","isEmpty","isUndefined","defaultValue","isFunction","isObject","createAriaLiveNode","ariaDivId","$node","insertAfter","txtBoxId","ulTagId","aria","label","ariaLabel","trim","prev","default"],"sources":["/Users/tushar/Desktop/fullstack-angular-and-springboot-master/source-code/ecommerce-project-release-3.0/09-security-order-history-secure-backend-and-frontend/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/packages/@okta/courage-dist/esm/src/courage/views/forms/inputs/Select.js"],"sourcesContent":["import _Handlebars2 from '../../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaJQueryStatic from '../../../util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport Keys from '../../../util/Keys.js';\nimport '../../../vendor/plugins/chosen.jquery.js';\nimport BaseInput from '../BaseInput.js';\nimport Util from '../../../util/Util.js';\nimport StringUtil from '../../../util/StringUtil.js';\n\nconst template = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        alias1 = depth0 != null ? depth0 : container.nullContext || {},\n        alias2 = container.hooks.helperMissing,\n        alias3 = \"function\",\n        alias4 = container.escapeExpression,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<select id=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"inputId\") || (depth0 != null ? lookupProperty(depth0, \"inputId\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"inputId\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 12\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 23\n        }\n      }\n    }) : helper)) + \"\\\" name=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"name\") || (depth0 != null ? lookupProperty(depth0, \"name\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"name\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 31\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 39\n        }\n      }\n    }) : helper)) + \"\\\"></select>\";\n  },\n  \"useData\": true\n});\n\nconst option = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        alias1 = depth0 != null ? depth0 : container.nullContext || {},\n        alias2 = container.hooks.helperMissing,\n        alias3 = \"function\",\n        alias4 = container.escapeExpression,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<option value=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"key\") || (depth0 != null ? lookupProperty(depth0, \"key\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"key\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 15\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 22\n        }\n      }\n    }) : helper)) + \"\\\">\" + alias4((helper = (helper = lookupProperty(helpers, \"value\") || (depth0 != null ? lookupProperty(depth0, \"value\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n      \"name\": \"value\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 24\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 33\n        }\n      }\n    }) : helper)) + \"</option>\";\n  },\n  \"useData\": true\n});\n\nconst CHOSEN_WINDOW_MARGIN = 20;\nconst isSafari = Util.isSafari; // Chosen has known problems when it's at the bottom of a container that has\n// overflow:hidden set. Because it attaches to the parent container, its\n// dropdown will be cut off in the UI. Any modal with a chosen select element\n// at the bottom will manifest this behavior.\n//\n// The fix (aside from replacing Chosen) is to change Chosen's behavior -\n// use the existing styles, but attach it to 'body' and position it correctly\n// so that it is not affected by a parent overflow.\n//\n// More details can be found in OKTA-46489, OKTA-83570\n\nconst CHOSEN_MAX_HEIGHT = 240;\nconst CHOSEN_Z_INDEX = 50000;\n\nfunction defer(fn) {\n  if (this.params.autoWidth) {\n    return fn.call(this);\n  } else {\n    return oktaUnderscore.defer(oktaUnderscore.bind(fn, this));\n  }\n}\n\nfunction findSelectWidth(self) {\n  self.$select.hide();\n  const select = oktaJQueryStatic(self.$select[0]).hide();\n  oktaJQueryStatic('body').append(select);\n  const width = self.params.width = select.width() * 1.2 + 'px';\n  self.$el.append(select.show());\n  return width;\n}\n\nfunction recalculateChosen($chosen, $results, $clone) {\n  const offset = $clone.offset();\n  $chosen.css({\n    left: offset.left,\n    top: offset.top\n  }); // Update the max-height to fit within the constraints of the window. This\n  // is especially important for modals because page scrolling is disabled.\n\n  const $win = oktaJQueryStatic(window);\n  const rHeight = $results.outerHeight();\n  const rBottom = rHeight + $results.offset().top - $win.scrollTop();\n  const wHeight = $win.height() - CHOSEN_WINDOW_MARGIN;\n  const maxHeight = Math.min(rHeight + wHeight - rBottom, CHOSEN_MAX_HEIGHT);\n  $results.css('max-height', maxHeight);\n}\n\nfunction handleKeyUpEvent($select, $chosen, $results) {\n  const $highlightedOption = $results.find('.active-result.highlighted');\n  $chosen.find('#' + $select.attr('id') + '_txt').attr('aria-activedescendant', $highlightedOption.attr('id')); // change the old selected item aria-selected to false\n  // and add add it to new item.\n\n  $results.find('[aria-selected=true]').attr('aria-selected', 'false');\n  $highlightedOption.attr('aria-selected', 'true'); // In case of Safari, add message to aria-live node to be read by screenreader.\n  // We need to do this special handling for Safari due to falkiness with aria-activedescendant\n  // handling. https://bit.ly/3z45IZF\n\n  if (isSafari()) {\n    // message read by screenReader i.e optionValue selected(United States selected)\n    const message = StringUtil.localize('oform.selectInput.country', 'courage', [$highlightedOption.text()]);\n    const elementId = $select.attr('id');\n\n    if (message !== '') {\n      oktaJQueryStatic(`#${elementId}_aria_div_id`).text(message);\n    }\n  }\n\n  const noResult = $results.find('li.no-results');\n\n  if (noResult.length) {\n    noResult.attr('role', 'alert');\n  }\n}\n\nfunction fixChosenModal($select, textPlaceholder) {\n  const $chosen = $select.next('.chzn-container');\n  const $clone = $chosen.clone();\n  const $results = $chosen.find('.chzn-results');\n  const $searchInput = $chosen.find('.chzn-search input[type=text]');\n  $searchInput.on('keyup', () => {\n    handleKeyUpEvent($select, $chosen, $results);\n  });\n  $chosen.addClass('closed'); // Will be used in SIW to fix screen reader focus.\n  // Use a hidden clone to maintain layout and calculate offset. This is\n  // necessary for more complex layouts (like adding a group rule) where\n  // the chosen element is floated.\n\n  $clone.css('visibility', 'hidden');\n  $clone.removeAttr('id');\n  $clone.find('li').removeAttr('id'); // Save the original styles - we'll revert to them when the select closes\n\n  const baseStyles = {\n    left: $chosen.css('left'),\n    top: $chosen.css('top'),\n    position: $chosen.css('position'),\n    float: $chosen.css('float'),\n    'z-index': $chosen.css('z-index')\n  };\n  $results.hide(); // Handler for any resize events that happen when the results list is open\n\n  const resizeHandler = oktaUnderscore.debounce(function () {\n    recalculateChosen($chosen, $results, $clone);\n  }, 10); // When the dropdown opens, attach it to body, with the correct absolute\n  // position coordinates\n\n  $select.off('.fixChosen'); // Remove events we could have added before\n\n  $select.on('liszt:showing_dropdown.fixChosen', function () {\n    $chosen.width($chosen.width());\n    $select.after($clone); // .chzn-container can trigger the vertical scrollbar if it causes scrollHeight > window height after append to\n    // the body. Force top -999999 to avoid the scrollbar so $chosen can find the right offset for relocation.\n\n    $chosen.css({\n      position: 'absolute',\n      float: 'none',\n      'z-index': CHOSEN_Z_INDEX,\n      top: -999999\n    });\n    oktaJQueryStatic('body').append($chosen);\n    oktaJQueryStatic('.chzn-search > :text').prop('placeholder', textPlaceholder);\n    $results.show();\n    recalculateChosen($chosen, $results, $clone); // Capture scroll events:\n    // - for forms that use fixed positioning (like editing attributes in\n    //   Profile Editor) - window scroll\n    // - for forms that are too long for the modal - o-form-content scroll\n\n    $select.parents().scroll(resizeHandler);\n    oktaJQueryStatic(window).on('resize scroll', resizeHandler);\n  });\n  $select.on('liszt:showing_dropdown', function () {\n    $chosen.removeClass('closed');\n  }); // When the dropdown closes or the element is removed, revert to the\n  // original styles and reattach it to its original placement in the dom.\n\n  $select.on('liszt:hiding_dropdown.fixChosen remove.fixChosen', function () {\n    $select.parents().off('scroll', resizeHandler);\n    oktaJQueryStatic(window).off('resize scroll', resizeHandler);\n    $chosen.css(baseStyles);\n    $results.hide();\n    $chosen.addClass('closed');\n    $results.css('max-height', CHOSEN_MAX_HEIGHT);\n    $clone.remove();\n    $select.after($chosen);\n  }); // Do not change the order of event listeners. This event must execute after \n  // \"liszt:hiding_dropdown.fixChosen remove.fixChosen\"\n\n  $select.on('liszt:hiding_dropdown.fixChosen', function () {\n    $searchInput.focus(); // set focus back to input only when the dropdown is closed\n  });\n}\n\nvar Select = BaseInput.extend({\n  className: 'o-form-select',\n\n  /**\n   * @Override\n   */\n  events: {\n    'change select': 'update',\n    'keyup .chzn-search > :text': function (e) {\n      if (Keys.isEsc(e)) {\n        this.$('.chzn-search > :text').val('');\n        e.stopPropagation();\n      }\n    }\n  },\n  constructor: function () {\n    this.template = template;\n    this.option = this.option || option;\n    BaseInput.apply(this, arguments);\n    this.params = this.options.params || {};\n  },\n\n  /**\n   * @Override\n   */\n  editMode: function () {\n    /* eslint max-statements: [2, 17] */\n    this.$el.html(template(this.options));\n    this.$select = this.$('select');\n    this.appendOptions(); // Fix a regression in jQuery 1.x on Firefox\n    // jQuery.val(value) prepends an empty option to the dropdown\n    // if value doesnt exist in the dropdown.\n    // http://bugs.jquery.com/ticket/13514\n\n    const value = this.getModelValue();\n\n    if (value) {\n      this.$select.val(value);\n    } else {\n      this.$('option:first-child').prop('selected', true);\n    }\n\n    this.$el.addClass('o-form-control');\n\n    if (this.params.chosen !== false) {\n      this.__applyChosen();\n    }\n\n    return this;\n  },\n  appendOptions: function () {\n    if (!this.getOptions()) {\n      return;\n    }\n\n    const options = this.getOptions();\n    const keys = Object.keys(options);\n    this.applySortByKey(keys);\n    keys.forEach(key => {\n      this.$select.append(this.option({\n        key: key,\n        value: options[key]\n      }));\n    });\n  },\n  applySortByKey: function (keys) {\n    const sortByKey = this.options.sortByKey;\n\n    if (!sortByKey) {\n      return;\n    }\n\n    if (sortByKey instanceof Function) {\n      keys.sort(sortByKey);\n    }\n\n    if (sortByKey === 'asc') {\n      keys.sort();\n    }\n\n    if (sortByKey === 'desc') {\n      keys.sort();\n      keys.reverse();\n    }\n  },\n  __applyChosen: function (update) {\n    let width = this.options.wide ? '100%' : this.params.width || '62%';\n\n    if (this.params.autoWidth) {\n      width = findSelectWidth(this);\n    }\n\n    defer.call(this, function () {\n      const searchThreshold = this.getParam('searchThreshold', 10);\n\n      if (!oktaUnderscore.result(this.options, 'autoRender') && update !== false) {\n        this.update();\n      }\n\n      this.$select.chosen({\n        width: width,\n        disable_search_threshold: searchThreshold,\n        //eslint-disable-line camelcase\n        placeholder_text: this.options['placeholder'],\n        //eslint-disable-line camelcase\n        search_contains: true //eslint-disable-line camelcase\n\n      }); //if options are more than search threshold, consider it as a combobox\n\n      const isComboBox = this.options && this.options.options && Object.keys(this.options.options).length > searchThreshold;\n      this.accessibilityUpdate(isComboBox, this.params);\n      fixChosenModal(this.$select, this.searchPlaceholder);\n\n      if (this.params.autoWidth) {\n        // fix a chosen css bug\n        this.$el.width(0);\n      }\n\n      this.model.trigger('form:resize');\n    });\n  },\n\n  /**\n   * @Override\n   */\n  val: function () {\n    return this.$select && this.$select.val();\n  },\n\n  /**\n   * @Override\n   */\n  focus: function () {\n    if (this.$select) {\n      return this.$select.focus();\n    }\n  },\n\n  /**\n   * @Override\n   */\n  toStringValue: function () {\n    const selectedOption = this.getModelValue();\n    let displayString = selectedOption;\n    const options = this.getOptions();\n\n    if (!oktaUnderscore.isEmpty(options)) {\n      displayString = options[selectedOption];\n    }\n\n    if (oktaUnderscore.isUndefined(displayString)) {\n      displayString = this.defaultValue();\n    }\n\n    return displayString || '';\n  },\n\n  /**\n   * Convert options to an object\n   * support input options that is a\n   * 1. a static object such as {key1: val1, key2: val2...}\n   * 2. a function to be called to return a static object\n   * will return an object with key-value pairs or with empty content\n   * @return {Object} The value\n   */\n  getOptions: function () {\n    let options = this.options.options;\n\n    if (oktaUnderscore.isFunction(options)) {\n      options = options.call(this);\n    }\n\n    return oktaUnderscore.isObject(options) ? options : {};\n  },\n  remove: function () {\n    if (this.$select) {\n      this.$select.trigger('remove');\n    }\n\n    return BaseInput.prototype.remove.apply(this, arguments);\n  },\n\n  /**\n   * @param ariaDivId id for div element\n   * Create a div element and add it to chosen container.\n   */\n  createAriaLiveNode: function (ariaDivId) {\n    const $chosen = this.$select.next('.chzn-container'); // set this to off-screen such that no user will see this and only screenReaders will pick this up.\n    // we should announce to user only on additions and not on removals.\n\n    const $node = oktaJQueryStatic('<div></div>').attr('role', 'log').attr('aria-live', 'polite').attr('id', ariaDivId).attr('aria-relevant', 'additions').attr('aria-atomic', 'false').attr('class', 'off-screen');\n    $node.insertAfter($chosen);\n  },\n\n  /**\n   * Code to make the select/combobox component accessible with screen readers.\n   *\n   * @param {boolean} isComboBox - Is the select a combobox?\n   * @param {object} params - params like aria label\n   */\n  // eslint-disable-next-line max-statements\n  accessibilityUpdate: function (isComboBox, params) {\n    const txtBoxId = this.$select.attr('id') + '_txt';\n    const ariaDivId = this.$select.attr('id') + '_aria_div_id';\n    const ulTagId = this.$select.attr('id') + '_ul'; // this is to fix(OKTA-506711) the accessibility issue due to partial support of aria-activedescendant\n    // by Safari. Make use of aria-live to make screenReader announce the option selected by user as a workaround.\n\n    if (isSafari()) {\n      this.createAriaLiveNode(ariaDivId);\n    }\n\n    this.$('ul[class=chzn-results]').attr('role', 'listbox').attr('id', ulTagId);\n\n    if (isComboBox) {\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-autocomplete', 'list').attr('aria-activedescendant', '').attr('role', 'combobox').attr('aria-expanded', 'true').attr('aria-controls', ulTagId);\n    } else {\n      this.$('input[type=text]').attr('id', txtBoxId).attr('role', 'listbox');\n    }\n\n    if (params && params.aria && params.aria.label) {\n      const ariaLabel = params.aria.label.trim();\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-label', ariaLabel);\n      this.$('ul[class=chzn-results]').attr('aria-label', ariaLabel);\n    } else {\n      const ariaLabel = this.$el.parent().prev('.o-form-label').find('label').text().trim();\n      this.$('input[type=text]').attr('id', txtBoxId).attr('aria-label', ariaLabel);\n      this.$('ul[class=chzn-results]').attr('aria-label', ariaLabel);\n    }\n\n    this.$('.chzn-results .active-result').attr('role', 'option').attr('aria-selected', 'false');\n  }\n});\n\nexport { Select as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}